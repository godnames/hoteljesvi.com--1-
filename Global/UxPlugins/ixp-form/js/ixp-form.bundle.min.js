!function(t){var e=t.components.dependencies._,i=(t.components.dependencies.Modernizr,t.components.constants.merge({descendantSelector:".ixp-component-form["+t.components.constants.components.data.componentRoot+"]",inputSelector:".ixp-input-validate",fieldSelector:".ixp-component-form-field",shownStatePrefix:".ixp-component-form-shown-state-",hiddenStatePrefix:".ixp-component-form-hidden-state-",behaviors:{submit:"form-submit"},css:{fieldLayoutPrefix:"ixp-component-form-field-layout-",hide:"ixp-component-form-state-hide",validated:"ixp-component-form-validated",notValidated:"ixp-component-form-not-validated",submitted:"ixp-component-form-submitted",notSubmitted:"ixp-component-form-not-submitted",showValidation:"ixp-component-form-show-validation",showStudioValidation:"ixp-component-form-show-studio-validation",showValidationPrefix:"ixp-component-form-show-validation-"},data:{inputType:"data-ixp-input-type",submitBehavior:"data-ixp-behavior-form-submit",submitBehaviorScope:"data-ixp-behavior-scope-form-submit"},builtIn:{classes:["ixp-component-form-default","ixp-component-form-light","ixp-component-form-dark"],builtInClass:"ixp-c-form-built-in"},validationModes:{onChange:"onchange",onSubmit:"onsubmit"},focusModes:{none:"none",form:"form",input:"input"},field:{inputContainerSelector:".ixp-component-form-field-input-container",labelContainerSelector:".ixp-component-form-field-label-container",infoContainerSelector:".ixp-component-form-field-info-container",shownStatePrefix:".ixp-component-form-field-shown-state-",hiddenStatePrefix:".ixp-component-form-field-hidden-state-",css:{hide:"ixp-component-form-field-state-hide",validated:"ixp-component-form-field-validated",notValidated:"ixp-component-form-field-not-validated",fieldStartsWith:"ixp-component-form-field-starts-with-",fieldEndsWith:"ixp-component-form-field-ends-with-"},data:{fieldFor:"data-ixp-component-form-field-for"}},extensibility:{commands:{status:":status",submit:":submit"},events:{submitting:":submitting",submitted:":submitted",status:":status",validatedSubmitting:":validated:submitting",formFieldInputRegistered:":formFieldInput:registered"}}}));t.components.registerExtensibility("ixp-form",{events:i.extensibility.events||{},commands:i.extensibility.commands||{}});var s={fieldCssClassesToPreserve:[i.field.css.validated,i.field.css.notValidated],formCssClassesToPreserve:[i.css.fieldLayoutPrefix+"simple",i.css.fieldLayoutPrefix+"expanded",i.css.validated,i.css.notValidated,i.css.submitted,i.css.notSubmitted,i.css.showValidation,i.css.showStudioValidation],getFieldScaffolding:function(t,e,i){return{style:{customClass:e.getDefaultTheme("formfield")}}},getSubmitButtonScaffolding:function(t,e,s){var n={},o=e.getBehaviorToken(i.data.submitBehavior);o&&(n[i.data.submitBehavior]="",n[i.data.submitBehaviorScope]=o);var a=e.scaffoldContainer("Submit Container"),r=e.scaffoldLink("Submit","Submit Button");return r.content.htmlAttributes=n,r.style.customClass="button button-a button-medium",a.content.scaffolding=[r],{scaffolding:[a],style:{customClass:e.getDefaultThemes({formsubmitbutton:"","formsubmitbutton-alignment":""})}}},getFormScaffolding:function(t,e,s){var n=(new Date).getTime()+"_form";e.addBehaviors("ixp-form",n);var o=e.scaffold("ixp-form-submit-button","Submit Container"),a={};a[i.components.data.behaviorScopeOwner]=n;var r=e.scaffoldContainer("Form");return r.content.scaffolding=[o],{scaffolding:[r],style:{customClass:e.getDefaultThemes({customform:"","customform-layout":"ixp-component-form-layout-top-labels","customform-validation-default":"ixp-component-form-default-validation","customform-validation-labels":"ixp-component-form-label-validation","customform-required-inputs":"ixp-required-input-asterisk","customform-label-alignment":"","customform-label-vertical-alignment":""})},content:{htmlAttributes:a}}},getWrapping:function(t,e,i){switch(t){case"ixp-textbox":case"ixp-choice-group":case"ixp-slider":case"ixp-dropdown":var s=e.scaffold("ixp-form-field","Form Field"),n=e.PendingContainerChildId+(new Date).getTime(),o=e.scaffoldContainer("Label Container");o.elementId=n+"Label",o.scaffoldContainerParameterId="label_container",o.content.scaffolding=[e.scaffoldText("Label","Label")];var a=e.scaffoldContainer("Form Field");return a.elementId=n+"Input",a.scaffoldContainerParameterId="input_container",a.content.scaffolding=[i.element||e.scaffold(t)],s.content.scaffolding=[o,a],s}return null},getFirstAndLastInputTypes:function(t){return[t.first().attr(i.inputs.data.inputType),t.last().attr(i.inputs.data.inputType)]},parseInputStates:function(t,e,n){n||(n={});var o={};n.aggregateSaves&&(o.toBeSaved=[]),n.aggregateInstances&&(o.instances={}),n.aggregateTypes&&(o.types=[]),n.index=0,e.each(function(){s._parseInputState(t,o,t(this),n),n.index++});var a={instances:o.instances,types:o.types,anyRequired:o.anyRequired,firstInvalidInputInstanceId:o.firstInvalidInputInstanceId};return o.invalid?a.validation=i.inputs.states.invalid:o.incomplete?a.validation=i.inputs.states.incomplete:o.pending?(a.validation=i.inputs.states.pending,a.inputsToBeSaved=o.toBeSaved):o.unknown||o.toBeSaved&&o.toBeSaved.length?(a.validation=i.inputs.states.unknown,a.inputsToBeSaved=o.toBeSaved):a.validation=i.inputs.states.valid,a},_parseInputState:function(e,s,n,o){if(o.aggregateTypes){var a=n.attr(i.inputs.data.inputType);e.inArray(a,s.types)===-1&&s.types.push(a)}if(o.aggregateInstances){var r=n.attr(i.components.data.componentRoot);s.instances[r]={instanceId:r,instance:t.components.instances[r].instance,index:o.index}}var l=n.attr(i.inputs.data.state);if(!l)return s;l=JSON.parse(l),s.anyRequired=s.anyRequired||l.required;var c;switch(l.validation){case i.inputs.states.invalid:return s.invalid=!0,s.firstInvalidInputInstanceId||(s.firstInvalidInputInstanceId=l.instanceId),!1;case i.inputs.states.incomplete:s.incomplete=!0,s.firstInvalidInputInstanceId||(s.firstInvalidInputInstanceId=l.instanceId);break;case i.inputs.states.pending:s.pending=!0;break;case i.inputs.states.unknown:l.requiresSave&&(s.unknown=!0,c=!0);break;default:l.requiresSave&&(c=!0)}return o.aggregateSaves&&c&&s.toBeSaved.push({instanceId:l.instanceId,dataField:l.dataField,value:l.value,method:l.saveMethod}),s},usesBuiltInStyles:function(t){for(var e=i.builtIn.classes,s=0,n=e.length;s<n;s++)if(t.hasClass(e[s]))return!0;return!1}};t.components.register("ixp-form-field",{initialize:function(s){var n=this.$el.closest(i.inputs.formSelector);if(this.formInstanceId=n.attr(i.components.data.componentRoot),this.$elInputContainer=this.$el.find(i.field.inputContainerSelector),this.$elLabelContainer=this.$el.find(i.field.labelContainerSelector),this.$elInfoContainer=this.$el.find(i.field.infoContainerSelector),this.$containers=this.$elLabelContainer.add(this.$elInputContainer).add(this.$elInfoContainer),this.$elInputs=this._getInputs(),this.state={validation:i.inputs.states.unknown},this.$elInputs.length){this._setState(),t.events.on(this,this.formInstanceId+i.inputs.events.inputStateChanged,this._onInputStateChanged);for(var o in this.state.inputs)this.state.inputs.hasOwnProperty(o)&&(t.events.on(this,o+i.inputs.events.inputChanged,this._onInputChanged),t.events.on(this,o+i.inputs.events.inputStateChanged,this._onInputStateChanged),t.events.trigger(o+i.inputs.events.formFieldInputRegistered,{labelContainerSelector:this.$elLabelContainer.selector}));this.inStudio||this.$elLabelContainer.on("click"+this.eventNamespace,e.bind(this._onLabelClicked,this))}},_onInputChanged:function(t){this._setState({validated:!0})},_onInputStateChanged:function(t){this._setState()},_setState:function(t){t||(t={});var e=s.parseInputStates(this.$,this.$elInputs,{aggregateInstances:!0,aggregateTypes:!0});if(this.state.inputs=e.instances,this.state.validation=e.validation,this.state.firstInvalidInputInstanceId=e.firstInvalidInputInstanceId,this.$el.toggleClass(i.inputs.css.required,!!e.anyRequired),this._setChildrenAttributesOnField(e),this.state.validation!==i.inputs.states.pending)for(var n in i.inputs.states)i.inputs.states.hasOwnProperty(n)&&this.$el.toggleClass(i.inputs.css.validationPrefix+n,n===this.state.validation);this.inStudio||(this.$containers.find('[class*="'+i.field.hiddenStatePrefix.substring(1)+'"]',i.descendantSelector).removeClass(i.css.hide),this.$containers.find('[class*="'+i.field.shownStatePrefix.substring(1)+'"]',i.descendantSelector).addClass(i.css.hide),this.$containers.find(i.field.hiddenStatePrefix+this.state.validation,i.descendantSelector).addClass(i.css.hide),this.$containers.find(i.field.shownStatePrefix+this.state.validation,i.descendantSelector).removeClass(i.css.hide)),!this.initializing&&t.validated&&this.state.validation!==i.inputs.states.pending&&this.$el.addClass(i.field.css.validated).removeClass(i.field.css.notValidated)},_setChildrenAttributesOnField:function(t){this.$el.attr(i.field.data.fieldFor,t.types.join(","));var e=s.getFirstAndLastInputTypes(this.$elInputs),n=i.field.css.fieldStartsWith,o=i.field.css.fieldEndsWith;this.inStudio&&this.$el.removeClass(function(t,e){e=e.split(" ");for(var i=[],s=0;s<e.length;s++)(e[s].indexOf(n)>-1||e[s].indexOf(o)>-1)&&i.push(e[s]);return i.join(" ")}),e[0]&&this.$el.addClass(n+e[0]),e[1]&&this.$el.addClass(o+e[1])},_onLabelClicked:function(t){var e;this.state.firstInvalidInputInstanceId?e=this.state.inputs[this.state.firstInvalidInputInstanceId]:this.$.each(this.state.inputs,function(){if(0===this.index)return e=this,!1}),e&&e.instance.setFocus()},_getInputs:function(){return this.$elInputContainer.find("."+i.inputs.css.input)},allowedDropTargets:function(){return["ixp-form"]},disallowedChildrenTypes:function(t){if(this.$elInputContainer[0]!==t.target)return["ixp-textbox","ixp-slider","ixp-choice-group"]},onGetCssClassesToPreserve:function(){return s.fieldCssClassesToPreserve},onGetScaffolding:function(t,e,i){return s.getFieldScaffolding(t,e,i)},onListenToStudioEvents:function(t){t.on("container:children:changed",function(t){t&&t.source&&this.$elInputContainer.find("#"+t.source).addBack("#"+t.source).length&&(this.$elInputs=this._getInputs(),this._setState())},this)}}),t.components.register("ixp-form-submit-button",{initialize:function(t){},onGetScaffolding:function(t,e,i){return s.getSubmitButtonScaffolding(t,e,i)},allowedDropTargets:function(){return["ixp-form"]}}),t.components.register("ixp-form",{initialize:function(s){return this.state={validation:i.inputs.states.unknown},this.$shadowForm=this.$el.find(".ixp-component-form-shadow").first(),this.$shadowFormSubmit=this.$shadowForm.find(".ixp-component-form-shadow-button").first(),this.$el.toggleClass(i.css.showValidationPrefix+i.validationModes.onChange,this.validationMode===i.validationModes.onChange).toggleClass(i.css.showValidationPrefix+i.validationModes.onSubmit,this.validationMode===i.validationModes.onSubmit),this._detectBuiltInClasses(),this.validate(),this.inStudio?void this.$el.removeClass(i.css.showValidation).addClass(i.css.showStudioValidation):(this.$shadowForm.on("submit",e.bind(function(t){this.customSubmitUrl||t.preventDefault()},this)),this.$shadowForm.on("click",function(t){t.stopPropagation()}),t.events.on(this,this.instanceId+i.inputs.events.inputChanged,this._onInputChanged),this.$el.on("keyup"+this.eventNamespace,e.bind(this._onKeyUp,this)),void this.onBehavior(this.$el,i.behaviors.submit,this._onSubmitClicked,null,{delegate:!1}))},_detectBuiltInClasses:function(){this.$el.toggleClass(i.builtIn.builtInClass,s.usesBuiltInStyles(this.$el))},onListenToStudioEvents:function(t){t.on("element:microtheme:applied element:microtheme:removed",e.bind(this._detectBuiltInClasses,this))},onGetCommandMap:function(){var t={};return t[i.extensibility.commands.status]={fn:this._onCommandStatus},t[i.extensibility.commands.submit]={fn:this._onCommandSubmit},t},_onCommandStatus:function(t){var e={validation:this.state.validation,submitting:this._isSubmitting()};this.triggerExtensibility(i.extensibility.events.status,e,{done:t&&t.done})},_onCommandSubmit:function(t){var s=this.getBehaviorSelector(i.behaviors.submit),n=this.$(s).last();n.length&&e.defer(function(t){t.preSubmitting=!0,n.click()},this)},validate:function(t){t||(t={});var e=this.filterChildren(i.inputSelector,i.descendantSelector),n=s.parseInputStates(this.$,e,{aggregateSaves:!0});t.submit&&(e.addClass(i.inputs.css.validated),this.filterChildren(i.fieldSelector,i.descendantSelector).addClass(i.field.css.validated)),delete this.state.inputsToBeSaved,this.state.validation=n.validation,this.state.inputsToBeSaved=n.inputsToBeSaved,n.firstInvalidInputInstanceId?this.state.firstInvalidInputInstanceId=n.firstInvalidInputInstanceId:delete this.state.firstInvalidInputInstanceId,this._setState()},setFocus:function(){this.$el[0].scrollIntoView()},_setState:function(){for(var e in i.inputs.states)i.inputs.states.hasOwnProperty(e)&&this.$el.toggleClass(i.inputs.css.validationPrefix+e,e===this.state.validation);this.inStudio||(this.filterChildren('[class*="'+i.hiddenStatePrefix.substring(1)+'"]',i.descendantSelector).removeClass(i.css.hide),this.filterChildren('[class*="'+i.shownStatePrefix.substring(1)+'"]',i.descendantSelector).addClass(i.css.hide),this.filterChildren(i.hiddenStatePrefix+this.state.validation,i.descendantSelector).addClass(i.css.hide),this.filterChildren(i.shownStatePrefix+this.state.validation,i.descendantSelector).removeClass(i.css.hide)),this.initializing||this.state.validation===i.inputs.states.pending||this.$el.addClass(i.css.validated).removeClass(i.css.notValidated),t.events.trigger(this.instanceId+i.inputs.events.inputStateChanged,{instanceId:this.instanceId})},_onInputChanged:function(t){this.validate()},_onKeyUp:function(t){if(13===t.which||32===t.which){var s=this.$(t.target);if(!s.is("textarea")&&!s.parents("["+i.data.inputType+"=dropdown]").length){if(s.attr(i.data.submitBehaviorScope)!==this.instanceId){if(32===t.which)return;var n=this.getBehaviorSelector(i.behaviors.submit);if(s=this.$(n).last(),!s.length)return}t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),e.defer(function(t){t.preSubmitting=!0,s.click({interaction:{source:"keyboard"}})},this)}}},_isSubmitting:function(){return!!(this.preSubmitting||this.submitting||this.postSubmitTimestamp&&this.postSubmitTimestamp>=(new Date).getTime())},_mapInputData:function(t){var e=[];if(!t)return e;for(var i=0;i<t.length;i++){var s=t[i],n=null;try{n=JSON.parse(s.dataField).name}catch(o){}e.push({name:n,"delete":"DELETE"===s.method,value:s.value,inputInstanceId:s.instanceId})}return e},_onSubmitClicked:function(s){if(this.preSubmitting=!1,this.submitting)return s.stopPropagation(),s.stopImmediatePropagation(),s.preventDefault(),void this.log("_onSubmitClicked","aborted; already submitting");if(this.postSubmitTimestamp&&this.postSubmitTimestamp>=(new Date).getTime())return void this.log("_onSubmitClicked","aborted; already submitting (timeout)");if(this.state.validation===i.inputs.states.pending)return s.stopPropagation(),s.stopImmediatePropagation(),s.preventDefault(),void this.log("_onSubmitClicked","aborted; pending");this.submitting=!0,t.events.trigger(this.instanceId+t.components.constants.inputs.events.formSubmitting,{instanceId:this.instanceId});var n=s.target,o=this.$(n),a=this.getBehaviorSelector(i.behaviors.submit);o.is(a)||(o=o.closest(a),o.length&&(n=o[0]));var r={data:this._mapInputData(this.state.inputsToBeSaved),cancel:!1,submitElement:n};if(this.triggerExtensibility(i.extensibility.events.submitting,r),r.cancel)return s.stopPropagation(),s.stopImmediatePropagation(),s.preventDefault(),this.log("_onSubmitClicked","aborted; cancelled"),void(this.submitting=!1);if(this.validate({submit:!0}),r={data:this._mapInputData(this.state.inputsToBeSaved),validation:this.state.validation,cancel:!1,submitElement:n},this.triggerExtensibility(i.extensibility.events.validatedSubmitting,r),r.cancel)return s.stopPropagation(),s.stopImmediatePropagation(),s.preventDefault(),this.log("_onSubmitClicked","aborted; cancelled"),void(this.submitting=!1);this.$el.find('[class^="ixp-component-form-field-shown-state-"]').removeAttr("tabindex"),this.$el.find('[class^="ixp-component-form-field-shown-state-"]:not(.ixp-component-form-state-hide)').attr("tabindex","0"),this.$el.addClass(i.css.submitted).removeClass(i.css.notSubmitted);var l=this.$(s.target).closest("["+i.inputs.data.submitUrl+"]",this.$el[0]);if(l.length?this.state.submitUrl={url:l.attr(i.inputs.data.submitUrl),target:l.attr("target")}:delete this.state.submitUrl,this.state.validation===i.inputs.states.invalid||this.state.validation===i.inputs.states.incomplete)this.submitting=!1,r={validation:this.state.validation,success:!1},this.triggerExtensibility(i.extensibility.events.submitted,r),this.focusMode!==i.focusModes.none&&e.defer(function(t){t.focusMode===i.focusModes.form?t.setFocus():t.focusMode===i.focusModes.input&&t.sendCommand(i.extensibility.inputs.commands.focus,t.state.firstInvalidInputInstanceId,{instanceId:t.state.firstInvalidInputInstanceId})},this);else{var c={success:e.partial(this._onSubmitComplete,{submitUrl:this.state.submitUrl,eventTarget:s.target}),error:function(){this.submitting=!1,this.validate()}};if(s.data&&s.data.interaction&&(c.interaction=s.data.interaction),this.state.validation===i.inputs.states.pending)var h=window.setInterval(e.bind(function(){this.state.validation!==i.inputs.states.pending&&(window.clearInterval(h),this.submit(c))},this),50);else this.submit(c)}s.stopPropagation(),s.stopImmediatePropagation(),s.preventDefault()},submit:function(t){var i=function(e){this._processResponse(e,this.state.inputsToBeSaved),t.success.call(this)},s=function(e){if(409===e.status){var i=JSON.parse(e.responseText);this._processResponse(i.responseStatus.data,this.state.inputsToBeSaved)}t.error.call(this)};this.log("submit","submitting",this.state.inputsToBeSaved),this.pushInteraction(e.assign({name:"form submit",source:"click"},t.interaction||{})),this.submitData({data:this.state.inputsToBeSaved,success:i,error:s})},_processResponse:function(e,s){if(s&&s.length)for(var n,o,a=0;a<s.length;a++)n=e[a],o={instanceId:s[a].instanceId,value:n.value,validation:n.validation},t.events.trigger(o.instanceId+i.inputs.events.inputSaved,o)},_onSubmitComplete:function(t){this.submitting=!1,this.validate();var e={validation:this.state.validation,success:this.state.validation===i.inputs.states.valid,preventDefault:!1,customSubmitUrl:void 0,customSubmitMethod:"POST"};if(this.triggerExtensibility(i.extensibility.events.submitted,e),e.customSubmitUrl)return this.customSubmitUrl=e.customSubmitUrl,e.customSubmitMethod||(e.customSubmitMethod="POST"),this.$shadowForm.attr("action",e.customSubmitUrl),this.$shadowForm.attr("method",e.customSubmitMethod),this.log("_onSubmitComplete","custom submit url provided, customSubmitUrl="+e.customSubmitUrl+", customSubmitMethod="+e.customSubmitMethod),void this.$shadowForm.submit();if(e.preventDefault)return void this.log("_onSubmitComplete","prevented");if(this.state.validation!==i.inputs.states.valid)return void this.log("_onSubmitComplete","invalid");if(this.$shadowFormSubmit.click(),t.submitUrl&&t.submitUrl.url)switch(this.log("_onSubmitComplete","valid - url",t.submitUrl.url),t.submitUrl.target){case"_blank":window.open(t.submitUrl.url,"_blank");break;case"_parent":window.parent.location.assign(t.submitUrl.url);break;case"_top":window.top.location.assign(t.submitUrl.url);break;default:window.location.assign(t.submitUrl.url)}else if(t.eventTarget){if(this.log("_onSubmitComplete","valid - click",t.eventTarget),this.postSubmitTimestamp=(new Date).getTime()+250,"function"==typeof t.eventTarget.click||"object"==typeof t.eventTarget.click)try{return void t.eventTarget.click()}catch(s){}var n;document.createEvent?(n=document.createEvent("MouseEvents"),n.initEvent("click",!0,!0),t.eventTarget.dispatchEvent(n)):document.createEventObject&&(n=document.createEventObject(),t.eventTarget.fireEvent("onclick",n))}},studioInitialize:function(t){this._studioSetFieldLayout()},_studioSetFieldLayout:function(){var t=this.filterChildren(i.field.infoContainerSelector,i.descendantSelector);"simple"===this.fieldLayout?t.attr(i.components.studio.data.hidden,!0):"expanded"===this.fieldLayout&&t.removeAttr(i.components.studio.data.hidden)},getParamMapOverrides:function(){return{fieldLayout:function(t){this.$el.removeClass(i.css.fieldLayoutPrefix+this.fieldLayout),this.fieldLayout=t,this.$el.addClass(i.css.fieldLayoutPrefix+this.fieldLayout),this._studioSetFieldLayout(),this.studioApp.componentsManager.trigger(i.components.studio.events.reflow,{instanceId:this.instanceId})},validationMode:function(t){this.$el.removeClass(i.css.showValidationPrefix+this.validationMode),this.validationMode=t,this.$el.addClass(i.css.showValidationPrefix+this.validationMode)}}},allowedDropTargets:function(){return["Container","Column"]},onGetCssClassesToPreserve:function(){return s.formCssClassesToPreserve},onGetScaffolding:function(t,e,i){return s.getFormScaffolding(t,e,i)},onGetWrapping:function(t,e,i){return s.getWrapping(t,e,i)}})}(window.ixp.runtime),function(t){var e=t.components.dependencies._,i=t.components.dependencies.Modernizr,s=t.components.dependencies.jQuery.v1_11,n=t.components.constants.merge({inputDataElem:"data-ixp-textbox-type",inputSelector:"[data-ixp-textbox-type]",inputWrapSelector:".ixp-component-textbox-input-wrap",css:{legacyPlaceholder:"ixp-legacy-placeholder",textboxHidden:"ixp-component-textbox-hidden",resizerHorizontal:"ixp-component-resizer-horizontal",resizerVertical:"ixp-component-resizer-vertical",resizerBoth:"ixp-component-resizer-both"},extensibility:{events:{valueChanging:":value:changing",valueChanged:":value:changed"}}});t.components.registerExtensibility("ixp-textbox",{commands:n.extensibility.commands||{},events:n.extensibility.events||{}});var o={getScaffolding:function(t,e,i){return{style:{customClass:e.getDefaultTheme("textbox")}}}};t.components.register("ixp-textbox",t.components.InputComponentBase,{initialize:function(e){this._setInputType(this.inputType),this._setInitialValue(this.defaultValue),this.inStudio||(void 0===this.validation_delay?this.validation_delay=750:"string"==typeof this.validation_delay&&(this.validation_delay=parseInt(this.validation_delay,10)),1e4==this.validation_delay&&(this.validation_delay=void 0),t.events.on(this,this.formInstanceId+n.inputs.events.formSubmitting,this._onFormSubmitting),t.events.on(this,this.state.instanceId+n.inputs.events.formFieldInputRegistered,this._onFormFieldInputRegistered))},onListenToInputEvents:function(){var t=e.bind(this.onInputChanged,this),s=n.inputSelector,o=this.isMultiline()?"keyup":"textchange";!i.input.placeholder&&this.placeholder?(this.$elInputWrap=this.$el.find(n.inputWrapSelector),this.$elInputWrap.attr("data-ixp-placeholder",this.placeholder),this._onTextboxChanged(function(){},{}),this.$elInputWrap.on("click"+this.eventNamespace+", mousedown"+this.eventNamespace+", mouseup"+this.eventNamespace,e.bind(this._onInputWrapClicked,this)),this.$el.on("change"+this.eventNamespace,s,e.bind(e.partial(this._onTextboxChanged,t),this)),this.validation_delay?this.$el.on(o+this.eventNamespace,s,e.bind(e.partial(this._onTextboxChanged,e.debounce(t,this.validation_delay)),this)):this.$el.on(o+this.eventNamespace,s,e.bind(e.partial(this._onTextboxChanged,function(){}),this))):(this.$el.on("change"+this.eventNamespace,s,t),this.validation_delay&&this.$el.on(o+this.eventNamespace,s,e.debounce(t,this.validation_delay))),this.selectOnFocus&&(this.$el.on("focusin"+this.eventNamespace,s,e.bind(this._onInputFocused,this)),this.$el.on("focusout"+this.eventNamespace,s,e.bind(this._onInputBlurred,this))),this.$el.on(o+this.eventNamespace,s,e.bind(this._onValueChanging,this))},_onInputWrapClicked:function(t){this.setFocus()},_onFormSubmitting:function(){this.setValue(this.getValue(),{trigger:!1,submitting:!0})},_onFormFieldInputRegistered:function(t){var e=s(t.labelContainerSelector).get(0);this._setAriaLabelAttribute(e)},_onTextboxChanged:function(t,e){""===this.getValue()?this.$elInputWrap.addClass(n.css.legacyPlaceholder):this.$elInputWrap.hasClass(n.css.legacyPlaceholder)&&this.$elInputWrap.removeClass(n.css.legacyPlaceholder),t(e)},_onValueChanging:function(t){var i=this.getValue(),s={value:i,hasValue:!this.isValueEmpty(i),required:this.state.required};this.triggerExtensibility(n.extensibility.events.valueChanging,s),s.value!==this.getValue()&&this.setValue(s.value),e.defer(function(t){i=t.getValue(),t.triggerExtensibility(n.extensibility.events.valueChanged,{value:i,hasValue:!t.isValueEmpty(i),required:t.state.required})},this)},onDestroy:function(){var t=this.getTextElement();t.length&&t.off(this.eventNamespace)},setFocus:function(){var t=this.$el.closest(n.inputs.formFieldSelector);t.length&&(t.attr("tabindex",0),t.focus(),t.removeAttr("tabindex")),this.getTextElement().focus()},isMultiline:function(){return"multiline"===this.inputType},getTextElement:function(){return this.$el.find(n.inputSelector)},createTextElement:function(t,e){var i="multiline"===t?"textarea":"input",s=this.$("<"+i+" />");s.attr("id","ixp_input_"+this.instanceId),s.attr(n.inputDataElem,t),"multiline"!==t&&s.attr("type",t),s.addClass("ixp-component-textbox-input"),"multiline"===t&&s.addClass("ixp-component-textbox-textarea");var o=JSON.parse(this.dataField);if(o&&o.autocomplete&&s.attr("autocomplete",o.autocomplete),e.length)e.replaceWith(s),e.off(this.eventNamespace);else{var a=this.$el.find(n.inputWrapSelector);s.appendTo(a)}return s},getValue:function(){return this.getTextElement().val()},onSetValue:function(t){this.getTextElement().val(t)},isSaveRequired:function(e){return!this.state.required&&this.isValueEmpty(e)?!(this.initializing||!this.dataContext.hasValue||e==this.dataContext.value)&&{method:"DELETE"}:t.components.InputComponentBase.prototype.isSaveRequired.apply(this,arguments)},onValidateValue:function(t){if("number"!==this.inputType||!this.required&&this.isValueEmpty(t))return!0;var i=this.getTextElement()[0];return!(i.validity&&!i.validity.valid)&&((!e.isString(t)||(t=parseFloat(t.replace(/,/g,"")),!isNaN(t)))&&!(t<(this.numberMin||0)||t>(this.numberMax||0)))},_onInputFocused:function(t){this.focused=!0,e.defer(function(e){e.focused&&e.getValue()&&e.$(t.target).select()},this)},_onInputBlurred:function(t){this.focused=!1},_setInputType:function(t,e){e||(e={}),this.inputType=t;var i=this.getTextElement(),s=i.attr("type");if((e.force||s!==this.inputType)&&this.createTextElement(this.inputType,i),this.dataContext.validation.maxLength)switch(this.inputType){case"multiline":case"text":case"email":case"search":case"password":case"tel":case"url":this.getTextElement().attr("maxlength",this.dataContext.validation.maxLength)}this._setNumberLines(this.numberLines),this._setResize(this.resize),this._setPlaceholder(this.placeholder),this._setNumberMin(this.numberMin),this._setNumberMax(this.numberMax),this._setNumberStep(this.numberStep),this.inStudio&&this.setInStudioDataFieldValidation()},_setInitialValue:function(t){var e;switch(this.defaultValueType){case"none":e="";break;case"datafield":this.inStudio||(this.dataContext.hasValue?t=this.dataContext.value:this.dataContext.hasDefaultValue&&(t=this.dataContext.defaultValue)),e=t;break;case"custom":e=t}this.setValue(e),this.validate(e)},_setNumberMin:function(t){if("number"===this.inputType){var e=parseFloat(t);this.numberMin=isNaN(e)?"":e,""===t?this.getTextElement().removeAttr("min"):this.getTextElement().attr("min",t)}else this.getTextElement().removeAttr("min");this.inStudio&&this._setInitialValue(this.defaultValue)},_setNumberMax:function(t){if("number"===this.inputType){var e=parseFloat(t);this.numberMax=isNaN(e)?"":e,""===t?this.getTextElement().removeAttr("max"):this.getTextElement().attr("max",t)}else this.getTextElement().removeAttr("max");this.inStudio&&this._setInitialValue(this.defaultValue)},_setNumberStep:function(t){if("number"===this.inputType){var e=parseFloat(t);this.numberStep=isNaN(e)?0:e,this.getTextElement().attr("step",this.numberStep||"any")}else this.getTextElement().removeAttr("step")},_setPlaceholder:function(t){this.placeholder=t,i.input.placeholder&&(t?this.getTextElement().attr("placeholder",t):this.getTextElement().removeAttr("placeholder"))},_setNumberLines:function(t){this.isMultiline()?this.getTextElement().attr("rows",t):this.getTextElement().removeAttr("rows")},_setResize:function(t){this.isMultiline()?(this.getTextElement().css({resize:t}),this.getTextElement().hide().show(0)):this.getTextElement().css({resize:""})},_setAriaLabelAttribute:function(t){t&&t.id&&this.getTextElement().attr("aria-labelledby",t.id)},studioInitialize:function(t){this.deactivateEvents(this.getTextElement())},getParamMapOverrides:function(){return{inputType:this._setInputType,defaultValue:function(t){this.defaultValue=t,this._setInitialValue(this.defaultValue)},defaultValueType:function(t){this.defaultValueType=t,this._setInitialValue(this.defaultValue)},numberLines:function(t){this.numberLines=t,this._setNumberLines(t)},resize:function(t){this.resize=t,this._setResize(t)},placeholder:function(t){t!==this.placeholder&&this._setPlaceholder(t)},numberMin:this._setNumberMin,numberMax:this._setNumberMax,numberStep:this._setNumberStep}},allowedDropTargets:function(t){return"element"===t?["ixp-form-field"]:["ixp-form","ixp-form-field"]},onGetScaffolding:function(t,e,i){return o.getScaffolding(t,e,i)}})}(window.ixp.runtime),function(t){var e=document.createElement("input"),i="oninput"in e&&(!("documentMode"in document)||document.documentMode>9),s=function(t){return"INPUT"===t.nodeName&&("text"===t.type||"password"===t.type)},n=null,o=null,a=null,r={get:function(){return a.get.call(this)},set:function(t){o=t,a.set.call(this,t)}},l=function(t){n=t,o=t.value,a=Object.getOwnPropertyDescriptor(t.constructor.prototype,"value"),Object.defineProperty(n,"value",r),n.attachEvent("onpropertychange",h)},c=function(){n&&(delete n.value,n.detachEvent("onpropertychange",h),n=null,o=null,a=null)},h=function(e){if("value"===e.propertyName){var i=e.srcElement.value;i!==o&&(o=i,t(n).trigger("textchange"))}};i?t(document).on("input",function(e){"TEXTAREA"!==e.target.nodeName&&t(e.target).trigger("textchange")}):t(document).on("focusin",function(t){s(t.target)&&(c(),l(t.target))}).on("focusout",function(){c()}).on("selectionchange keyup keydown",function(){n&&n.value!==o&&(o=n.value,t(n).trigger("textchange"))})}(window.ixp.runtime.components.dependencies.jQuery.v1_11),function(t){var e=t.components.dependencies._,i=t.components.dependencies.jQuery.v1_11,s=t.components.dependencies.Modernizr,n=t.components.constants.merge({dropdownSelector:function(t){return"#ixp_dropdown_"+t},formMicrothemesMap:{"ixp-component-form-default":"ixp-component-dropdown-menu-inherit","ixp-component-form-light":"ixp-component-dropdown-menu-opacity-light","ixp-component-form-dark":"ixp-component-dropdown-menu-opacity-dark"},formMicrothemesToRetainPrefix:"ixp-component-form-style-",dropdownStyleMicrothemesToRetainPrefix:"ixp-component-dropdown-",dropdownCustomMicrothemesToRetainPrefix:"ixp-component-dropdown-select-",menuMicrothemePrefix:"ixp-component-dropdown-menu-",defaultDropdownMicrotheme:"ixp-component-dropdown-inherit",defaultMenuMicrotheme:"ixp-component-dropdown-menu-inherit",css:{dropdownRequired:"ixp-component-dropdown-required",dropdownResponsiveDisabled:"ixp-component-dropdown-select-responsive-disabled",menuResponsiveDisabled:"ixp-component-dropdown-menu-responsive-disabled"},extensibility:{commands:{open:":open",close:":close",state:":state",search:":search"},events:{valueChanging:":value:changing",valueChanged:":value:changed",loading:":loading",loaded:":loaded",opening:":opening",opened:":opened",closed:":closed"}}});t.components.registerExtensibility("ixp-dropdown",{commands:n.extensibility.commands||{},events:n.extensibility.events||{}});var o={getScaffolding:function(t,e,i){return{style:{customClass:e.getDefaultTheme("dropdown")}}},getOrientation:function(){var t=window.orientation;return t=void 0===t?document.documentElement.clientWidth>document.documentElement.clientHeight?"landscape":"portrait":0===t||180===t?"portrait":"landscape";
},getViewportScale:function(){var t,e=document.documentElement.clientWidth;if(!(screen.width>e)){var i=this.getOrientation(),s=screen.width;return"portrait"===i?screen.width>screen.height&&(s=screen.height):screen.width<screen.height&&(s=screen.height),t=s/window.innerWidth}}};t.components.register("ixp-dropdown",t.components.InputComponentBase,{initialize:function(e){this.$elDropdown=this.$el.find(n.dropdownSelector(this.instanceId)),this.useCache=!0,this.dataSet=this.dataSet&&JSON.parse(this.dataSet),this.dependentDataField=this.dependentDataField&&JSON.parse(this.dependentDataField),this._createDropdown(),!this.inStudio&&this.dependentDataField&&(t.events.on(this,"runtime:data:"+this.dependentDataField.name+":saving",this._onDependentDataSaving),this.onDependentDataSaved({key:this.dependentDataContext.name,value:this.dependentDataContext.hasValue?this.dependentDataContext.value:this.dependentDataContext.defaultValue})),this._setInitialValue(this.defaultValue),this.listenToDropdownEvents()},listenToDropdownEvents:function(){this.$elDropdown.on("select2-opening"+this.eventNamespace,e.bind(this._onDropdownOpening,this)),this.$elDropdown.on("select2-open"+this.eventNamespace,e.bind(this._onDropdownOpened,this)),this.$elDropdown.on("select2-close"+this.eventNamespace,e.bind(this._onDropdownClosed,this)),this.$elDropdown.on("select2-selecting"+this.eventNamespace,e.bind(this._onDropdownChanging,this)),this.$elDropdown.on("select2-loaded"+this.eventNamespace,e.bind(this._onDropdownLoaded,this)),t.events.on(this,this.state.instanceId+n.inputs.events.formFieldInputRegistered,this._onFormFieldInputRegistered)},_onFormFieldInputRegistered:function(t){var e=i(t.labelContainerSelector).get(0);this._setAriaLabelAttribute(e)},onListenToInputEvents:function(){var t=e.bind(this.onInputChanged,this);this.$el.on("change"+this.eventNamespace,n.inputSelector,e.bind(e.partial(this._onDropdownChanged,t),this))},onGetCommandMap:function(){var t={};return t[n.extensibility.commands.open]={fn:this._onCommandOpen},t[n.extensibility.commands.close]={fn:this._onCommandClose},t[n.extensibility.commands.state]={fn:this._onCommandState},t[n.extensibility.commands.search]={fn:this._onCommandSearch},t},_onCommandOpen:function(){this.$elDropdown.select2("open")},_onCommandClose:function(){this.$elDropdown.select2("close")},_onCommandState:function(t){t||(t={}),t.enabled!==!0&&t.enabled!==!1||this.$elDropdown.select2("enable",t.enabled),t.readonly!==!0&&t.readonly!==!1||this.$elDropdown.select2("readonly",t.readonly),t.useCache!==!0&&t.useCache!==!1||(this.useCache=t.useCache,t.useCache||(this.choicesCache=null))},_onCommandSearch:function(t){t||(t={}),this.$elDropdown.select2("search",t.value)},_onDependentDataSaving:function(t){this.choicesCache=null,this.dependentChangingTimer=e.delay(function(t){t.dependentChangingTimer=0,t._onCommandState({readonly:!0})},500,this)},onDependentDataSaved:function(t){this.dependentChangingTimer&&(clearTimeout(this.dependentChangingTimer),this.dependentChangingTimer=0),this.choicesCache=null;var e=!this.isValueEmpty(t.value);this._onCommandState({enabled:e,readonly:!1});var i=this.getValue();this.isValueEmpty(i)||this.setValue(i,{save:!1,trigger:!1})},_onInputWrapClicked:function(t){this.setFocus()},_onDropdownChanging:function(t){var e={value:t.val,choice:{value:t.choice.id,name:t.choice.text},required:this.state.required,cancel:!1};if(this.triggerExtensibility(n.extensibility.events.valueChanging,e),e.cancel)return void t.preventDefault()},_onDropdownChanged:function(t,e){var i={value:e.val,choice:{value:e.added.id,name:e.added.text},required:this.state.required};this.triggerExtensibility(n.extensibility.events.valueChanged,i),t(e)},_onDropdownOpening:function(t){if(this.dependentChangingTimer)return void t.preventDefault();var e={cancel:!1};if(this.triggerExtensibility(n.extensibility.events.opening,e),e.cancel)return void t.preventDefault();if(document.activeElement&&document.activeElement.blur(),this.$elDropdown.select2("dropdown").css("pointer-events","none"),s.mobiledevice){var a=i("meta[name=viewport]");if(a.length){this.initialContent=a.attr("content"),this.currentViewportScale=o.getViewportScale();var r=this.initialContent+", maximum-scale=1, user-scalable=no";a.attr("content",r)}}},_onDropdownOpened:function(t){e.delay(e.bind(function(){this.$elDropdown.select2("dropdown").css("pointer-events","auto")},this),100),this.triggerExtensibility(n.extensibility.events.opened)},_onDropdownClosed:function(t){if(s.mobiledevice){var e=i("meta[name=viewport]");e.length&&this.initialContent&&(this.currentViewportScale&&e.attr("content",this.initialContent+",minimum-scale="+this.currentViewportScale+", maximum-scale="+this.currentViewportScale+", user-scalable=no"),e.attr("content",this.initialContent))}this.triggerExtensibility(n.extensibility.events.closed)},_onDropdownLoaded:function(t){this.triggerExtensibility(n.extensibility.events.loaded)},onDestroy:function(){this.$elDropdown&&this.$elDropdown.length&&this.$elDropdown.off(this.eventNamespace)},setFocus:function(){var t=this.$el.closest(n.inputs.formFieldSelector);t.length&&(t.attr("tabindex",0),t.focus(),t.removeAttr("tabindex")),this.$elDropdown.select2("focus")},getValue:function(){return this.$elDropdown.val()},onSetValue:function(t,i){if(i.useMetadata){var s=JSON.parse(this.dataContext.metadata);return void this.$elDropdown.select2("data",{id:s.choiceValue,text:s.choiceName})}return this._findMatchingChoice(t).then(e.bind(function(t){return this.$elDropdown.select2("data",t),t&&t.id},this))},_findMatchingChoice:function(t){return this.isValueEmpty(t)?Promise.resolve(null):this._getChoices().then(function(e){for(var i,s=0;s<e.length;s++)if(i=e[s],i.id===t)return i;return null})},isSaveRequired:function(e){return!this.state.required&&this.isValueEmpty(e)?!(!this.dataContext.hasValue||e==this.dataContext.value)&&{method:"DELETE"}:t.components.InputComponentBase.prototype.isSaveRequired.apply(this,arguments)},onValidateValue:function(t){return!0},_onInputFocused:function(t){this.focused=!0,e.defer(function(e){e.focused&&e.$(t.target).select()},this)},_onInputBlurred:function(t){this.focused=!1},_getChoices:function(t){var i;return i=this.choicesCache?Promise.resolve(this.choicesCache):this.dataSet?this._fetchChoicesFromDataSet(t):this._fetchChoicesFromExtensibility(t),t?i.then(e.bind(function(e){return this._searchChoices(e,t)},this)):i},_fetchChoicesFromDataSet:function(s){var n="/admin/api/v1/datasets/"+this.dataSet.id+"/entries/query";if(this.dependentDataField){var o=t.data.model.get(this.dependentDataField.name);if(!o||this.isValueEmpty(o.value))return Promise.resolve([]);n+="?filter1="+o.value}return Promise.resolve(i.ajax({url:n,dataType:"json",contentType:"application/json; charset=utf-8",type:"GET"})).then(e.bind(this._parseChoices,this))},_fetchChoicesFromExtensibility:function(t){var i={choices:null,filter:this.dependentDataField&&this.dependentDataField.value,search:t,useCache:this.useCache};return this.triggerExtensibility(n.extensibility.events.loading,i),this.useCache=i.useCache,i.choices instanceof Promise?i.choices.then(e.bind(this._parseChoices,this)):i.choices instanceof Array?Promise.resolve(i.choices).then(e.bind(this._parseChoices,this)):Promise.reject({e:i})},_parseChoices:function(t){t.length&&!t[0].value&&t.shift();for(var e,i,s=new Array(t.length),n=0;n<t.length;n++)i=t[n],e=s[n]={id:i.value,text:i.name,disabled:!!i.disabled,normalizedText:i.name.toUpperCase()},i.children&&i.children instanceof Array&&(e.children=this._parseChoices(i.children));return this.useCache&&(this.choicesCache=s),s},_searchChoices:function(t,e){e=e.toUpperCase();for(var i,s=[],n=0;n<t.length;n++)if(i=t[n],i.children&&i.children instanceof Array){for(var o,a=[],r=i.children,l=0;l<r.length;l++)o=r[l],o.normalizedText.indexOf(e)>=0&&a.push(o);a.length&&s.push({id:i.id,text:i.text,disabled:i.disabled,normalizedText:i.normalizedText,children:a})}else i.normalizedText.indexOf(e)>=0&&s.push(i);return s},_createDropdown:function(){var t={initSelection:function(){},allowClear:this.showClearButton,placeholder:this.placeholder,minimumResultsForSearch:this.showSearch?1:-1,dropdownAutoWidth:!0,adaptDropdownCssClass:e.bind(this._adaptDropdownCssClasses,this),data:[]};this.inStudio||(t.query=e.bind(function(t){this._getChoices(t.term).then(function(e){t.callback({results:e})})},this)),this.$elDropdown.select2(t),this.$elDropdown.select2("container").css("width","100%"),this.$elDropdown.select2("dropdown").prepend('<div class="select2-drop-close"><span class="select2-drop-close-label">Close</span></div>'),i(".select2-drop-close").on("click",e.bind(function(){this.$elDropdown.select2("close")},this));var s=JSON.parse(this.dataField);s&&s.autocomplete&&this.$elDropdown.select2("container").attr("autocomplete",s.autocomplete)},_adaptDropdownCssClasses:function(){var t,e=[],i=this.$el[0].className.split(" ");for(t=0;t<i.length;t++){var o=i[t];o!==n.defaultDropdownMicrotheme&&o.indexOf(n.dropdownCustomMicrothemesToRetainPrefix)===-1&&0===o.indexOf(n.dropdownStyleMicrothemesToRetainPrefix)&&e.push(o.replace(n.dropdownStyleMicrothemesToRetainPrefix,n.menuMicrothemePrefix))}if(this.$form.length&&0===e.length){var a=this.$form[0].className.split(" ");for(t=0;t<a.length;t++){var r=a[t];n.formMicrothemesMap[r]?e.push(n.formMicrothemesMap[r]):0===r.indexOf(n.formMicrothemesToRetainPrefix)&&e.push(r.replace(n.formMicrothemesToRetainPrefix,n.menuMicrothemePrefix))}}for(0===e.length&&e.push(n.defaultMenuMicrotheme),this.$el.hasClass(n.inputs.css.required)&&e.push(n.css.dropdownRequired),t=0;t<i.length;t++)o=i[t],0===o.indexOf(n.dropdownCustomMicrothemesToRetainPrefix)&&e.push(o.replace(n.dropdownCustomMicrothemesToRetainPrefix,n.menuMicrothemePrefix));return s.mobiledevice||this.$el.hasClass(n.css.dropdownResponsiveDisabled)||e.push(n.css.menuResponsiveDisabled),e.join(" ")},_refreshDropdown:function(t){t||(t=this),t.$elDropdown.select2("destroy"),t._createDropdown()},_setInitialValue:function(t){var e,i=!1;switch(this.defaultValueType){case"none":e="";break;case"datafield":this.inStudio||(this.dataContext.hasValue?(t=this.dataContext.value,i=this.dataContext.hasMetadata):this.dataContext.hasDefaultValue&&(t=this.dataContext.defaultValue)),e=t;break;case"custom":e=t}this.setValue(e,{useMetadata:i}),this.validate(e)},_setAriaLabelAttribute:function(t){t&&t.id&&this.$elDropdown.select2("container").attr("aria-labelledby",t.id)},studioInitialize:function(t){this.deactivateEvents(this.$elDropdown.select2("container"))},getParamMapOverrides:function(){return{inputType:this._setInputType,defaultValue:function(t){this.defaultValue=t,""===t&&this.$elDropdown.select2("data",""),this._setInitialValue(this.defaultValue)},defaultValueType:function(t){this.defaultValueType=t,this._setInitialValue(this.defaultValue)},placeholder:function(t){this.placeholder=t,this._refreshDropdown()}}},allowedDropTargets:function(t){return"element"===t?["ixp-form-field"]:["ixp-form","ixp-form-field"]},onGetScaffolding:function(t,e,i){return o.getScaffolding(t,e,i)}})}(window.ixp.runtime),function(t){"undefined"==typeof t.fn.each2&&t.extend(t.fn,{each2:function(e){for(var i=t([0]),s=-1,n=this.length;++s<n&&(i.context=i[0]=this[s])&&e.call(i[0],s,i)!==!1;);return this}})}(window.ixp.runtime.components.dependencies.jQuery.v1_11),function(t,e){"use strict";function i(e){var i=t(document.createTextNode(""));e.before(i),i.before(e),i.remove()}function s(t){function e(t){return U[t]||t}return t.replace(/[^\u0000-\u007E]/g,e)}function n(t,e){for(var i=0,s=e.length;i<s;i+=1)if(a(t,e[i]))return i;return-1}function o(){var e=t(L);e.appendTo("body");var i={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),i}function a(t,i){return t===i||t!==e&&i!==e&&(null!==t&&null!==i&&(t.constructor===String?t+""==i+"":i.constructor===String&&i+""==t+""))}function r(e,i){var s,n,o;if(null===e||e.length<1)return[];for(s=e.split(i),n=0,o=s.length;n<o;n+=1)s[n]=t.trim(s[n]);return s}function l(t){return t.outerWidth(!1)-t.width()}function c(i){var s="keyup-change-value";i.on("keydown",function(){t.data(i,s)===e&&t.data(i,s,i.val())}),i.on("keyup",function(){var n=t.data(i,s);n!==e&&i.val()!==n&&(t.removeData(i,s),i.trigger("keyup-change"))})}function h(i){i.on("mousemove",function(i){var s=N;s!==e&&s.x===i.pageX&&s.y===i.pageY||t(i.target).trigger("mousemove-filtered",i)})}function d(t,i,s){s=s||e;var n;return function(){var e=arguments;window.clearTimeout(n),n=window.setTimeout(function(){i.apply(s,e)},t)}}function u(t,e){var i=d(t,function(t){e.trigger("scroll-debounced",t)});e.on("scroll",function(t){n(t.target,e.get())>=0&&i(t)})}function p(t){t[0]!==document.activeElement&&window.setTimeout(function(){var e,i=t[0],s=t.val().length;t.focus();var n=i.offsetWidth>0||i.offsetHeight>0;n&&i===document.activeElement&&(i.setSelectionRange?i.setSelectionRange(s,s):i.createTextRange&&(e=i.createTextRange(),e.collapse(!1),e.select()))},0)}function f(e){e=t(e)[0];var i=0,s=0;if("selectionStart"in e)i=e.selectionStart,s=e.selectionEnd-i;else if("selection"in document){e.focus();var n=document.selection.createRange();s=document.selection.createRange().text.length,n.moveStart("character",-e.value.length),i=n.text.length-s}return{offset:i,length:s}}function m(t){t.preventDefault(),t.stopPropagation()}function g(t){t.preventDefault(),t.stopImmediatePropagation()}function v(e){if(!F){var i=e[0].currentStyle||window.getComputedStyle(e[0],null);F=t(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:i.fontSize,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontWeight:i.fontWeight,letterSpacing:i.letterSpacing,textTransform:i.textTransform,whiteSpace:"nowrap"}),F.attr("class","select2-sizer"),t("body").append(F)}return F.text(e.val()),F.width()}function b(e,i,s){var n,o,a=[];n=t.trim(e.attr("class")),n&&(n=""+n,t(n.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&a.push(this)})),n=t.trim(i.attr("class")),n&&(n=""+n,t(n.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(o=s(this),o&&a.push(o))})),e.attr("class",a.join(" "))}function C(t,e,i,n){var o=s(t.toUpperCase()).indexOf(s(e.toUpperCase())),a=e.length;return o<0?void i.push(n(t)):(i.push(n(t.substring(0,o))),i.push("<span class='select2-match'>"),i.push(n(t.substring(o,o+a))),i.push("</span>"),void i.push(n(t.substring(o+a,t.length))))}function x(t){var e={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(t).replace(/[&<>"'\/\\]/g,function(t){return e[t]})}function S(i){var s,n=null,o=i.quietMillis||100,a=i.url,r=this;return function(l){window.clearTimeout(s),s=window.setTimeout(function(){var s=i.data,o=a,c=i.transport||t.fn.select2.ajaxDefaults.transport,h={type:i.type||"GET",cache:i.cache||!1,jsonpCallback:i.jsonpCallback||e,dataType:i.dataType||"json"},d=t.extend({},t.fn.select2.ajaxDefaults.params,h);s=s?s.call(r,l.term,l.page,l.context):null,o="function"==typeof o?o.call(r,l.term,l.page,l.context):o,n&&"function"==typeof n.abort&&n.abort(),i.params&&(t.isFunction(i.params)?t.extend(d,i.params.call(r)):t.extend(d,i.params)),t.extend(d,{url:o,dataType:i.dataType,data:s,success:function(t){var e=i.results(t,l.page,l);l.callback(e)}}),n=c.call(r,d)},o)}}function w(e){var i,s,n=e,o=function(t){return""+t.text};t.isArray(n)&&(s=n,n={results:s}),t.isFunction(n)===!1&&(s=n,n=function(){return s});var a=n();return a.text&&(o=a.text,t.isFunction(o)||(i=a.text,o=function(t){return t[i]})),function(e){var i,s=e.term,a={results:[]};return""===s?void e.callback(n()):(i=function(n,a){var r,l;if(n=n[0],n.children){r={};for(l in n)n.hasOwnProperty(l)&&(r[l]=n[l]);r.children=[],t(n.children).each2(function(t,e){i(e,r.children)}),(r.children.length||e.matcher(s,o(r),n))&&a.push(r)}else e.matcher(s,o(n),n)&&a.push(n)},t(n().results).each2(function(t,e){i(e,a.results)}),void e.callback(a))}}function y(i){var s=t.isFunction(i);return function(n){var o=n.term,a={results:[]},r=s?i(n):i;t.isArray(r)&&(t(r).each(function(){var t=this.text!==e,i=t?this.text:this;(""===o||n.matcher(o,i))&&a.results.push(t?this:{id:this,text:this})}),n.callback(a))}}function I(e,i){if(t.isFunction(e))return!0;if(!e)return!1;if("string"==typeof e)return!0;throw new Error(i+" must be a string, function, or falsy value")}function T(e,i){if(t.isFunction(e)){var s=Array.prototype.slice.call(arguments,2);return e.apply(i,s)}return e}function _(e){var i=0;return t.each(e,function(t,e){e.children?i+=_(e.children):i++}),i}function E(t,i,s,n){var o,r,l,c,h,d=t,u=!1;if(!n.createSearchChoice||!n.tokenSeparators||n.tokenSeparators.length<1)return e;for(;;){for(r=-1,l=0,c=n.tokenSeparators.length;l<c&&(h=n.tokenSeparators[l],r=t.indexOf(h),!(r>=0));l++);if(r<0)break;if(o=t.substring(0,r),t=t.substring(r+h.length),o.length>0&&(o=n.createSearchChoice.call(this,o,i),o!==e&&null!==o&&n.id(o)!==e&&null!==n.id(o))){for(u=!1,l=0,c=i.length;l<c;l++)if(a(n.id(o),n.id(i[l]))){u=!0;break}u||s(o)}}return d!==t?t:void 0}function P(){var e=this;t.each(arguments,function(t,i){e[i].remove(),e[i]=null})}function D(e,i){var s=function(){};return s.prototype=new e,s.prototype.constructor=s,s.prototype.parent=e.prototype,s.prototype=t.extend(s.prototype,i),s}if(window.Select2===e){var V,M,O,$,k,F,R,A,N={x:0,y:0},V={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(t){switch(t=t.which?t.which:t){case V.LEFT:case V.RIGHT:case V.UP:case V.DOWN:return!0}return!1},isControl:function(t){var e=t.which;switch(e){case V.SHIFT:case V.CTRL:case V.ALT:return!0}return!!t.metaKey},isFunctionKey:function(t){return t=t.which?t.which:t,t>=112&&t<=123}},L="<div class='select2-measure-scrollbar'></div>",U={"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"};R=t(document),k=function(){var t=1;return function(){return t++}}(),M=D(Object,{bind:function(t){var e=this;return function(){t.apply(e,arguments)}},init:function(i){var s=navigator.appVersion,n=/android/gi.test(s),a=/iphone|ipad|ipod/gi.test(s);this.probablyMobile=n||a||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent);var r,l,d=".select2-results";this.opts=i=this.prepareOpts(i),this.id=i.id,i.element.data("select2")!==e&&null!==i.element.data("select2")&&i.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(i.element.attr("id")||"autogen"+k()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",i.element.attr("title")),this.body=t("body"),b(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",i.element.attr("style")),this.container.css(T(i.containerCss,this.opts.element)),this.container.addClass(T(i.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",m),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),b(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(i.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",m),this.results=r=this.container.find(d),this.search=l=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",m),h(this.results),this.dropdown.on("mousemove-filtered",d,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",d,this.bind(function(t){this._touchEvent=!0,this.highlightUnderEvent(t)})),this.dropdown.on("touchmove",d,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",d,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(t){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),u(80,this.results),this.dropdown.on("scroll-debounced",d,this.bind(this.loadMoreIfNeeded)),t(this.container).on("change",".select2-input",function(t){t.stopPropagation()}),t(this.dropdown).on("change",".select2-input",function(t){t.stopPropagation()}),t.fn.mousewheel&&r.mousewheel(function(t,e,i,s){var n=r.scrollTop();s>0&&n-s<=0?(r.scrollTop(0),m(t)):s<0&&r.get(0).scrollHeight-r.scrollTop()+s<=r.height()&&(r.scrollTop(r.get(0).scrollHeight-r.height()),m(t))}),c(l),l.on("keyup-change input paste",this.bind(this.updateResults)),l.on("focus",function(){l.addClass("select2-focused")}),l.on("blur",function(){l.removeClass("select2-focused")}),this.dropdown.on("mouseup",d,this.bind(function(e){t(e.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(e),this.selectHighlighted(e))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(t){t.stopPropagation()}),this.nextSearchTerm=e,t.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==i.maximumInputLength&&this.search.attr("maxlength",i.maximumInputLength);var p=i.element.prop("disabled");p===e&&(p=!1),this.enable(!p);var f=i.element.prop("readonly");f===e&&(f=!1),this.readonly(f),A=A||o(),this.autofocus=i.element.prop("autofocus"),i.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",i.searchInputPlaceholder)},destroy:function(){var t=this.opts.element,i=t.data("select2");this.close(),t.length&&t[0].detachEvent&&t.each(function(){this.detachEvent("onpropertychange",this._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,i!==e&&(i.container.remove(),i.liveRegion.remove(),i.dropdown.remove(),t.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show()),P.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(t){return t.is("option")?{id:t.prop("value"),text:t.text(),element:t.get(),css:t.attr("class"),disabled:t.prop("disabled"),locked:a(t.attr("locked"),"locked")||a(t.data("locked"),!0)}:t.is("optgroup")?{text:t.attr("label"),children:[],element:t.get(),css:t.attr("class")}:void 0},prepareOpts:function(i){var s,n,o,l,c=this;if(s=i.element,"select"===s.get(0).tagName.toLowerCase()&&(this.select=n=i.element),n&&t.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in i)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),i=t.extend({},{populateResults:function(s,n,o){var a,r=this.opts.id,l=this.liveRegion;(a=function(s,n,h){var d,u,p,f,m,g,v,b,C,x;s=i.sortResults(s,n,o);var S=[];for(d=0,u=s.length;d<u;d+=1)p=s[d],m=p.disabled===!0,f=!m&&r(p)!==e,g=p.children&&p.children.length>0,v=t("<li></li>"),v.addClass("select2-results-dept-"+h),v.addClass("select2-result"),v.addClass(f?"select2-result-selectable":"select2-result-unselectable"),m&&v.addClass("select2-disabled"),g&&v.addClass("select2-result-with-children"),v.addClass(c.opts.formatResultCssClass(p)),v.attr("role","presentation"),b=t(document.createElement("div")),b.addClass("select2-result-label"),b.attr("id","select2-result-label-"+k()),b.attr("role","option"),x=i.formatResult(p,b,o,c.opts.escapeMarkup),x!==e&&(b.html(x),v.append(b)),g&&(C=t("<ul></ul>"),C.addClass("select2-result-sub"),a(p.children,C,h+1),v.append(C)),v.data("select2-data",p),S.push(v[0]);n.append(S),l.text(i.formatMatches(s.length))})(n,s,0)}},t.fn.select2.defaults,i),"function"!=typeof i.id&&(o=i.id,i.id=function(t){return t[o]}),t.isArray(i.element.data("select2Tags"))){if("tags"in i)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+i.element.attr("id");i.tags=i.element.data("select2Tags")}if(n?(i.query=this.bind(function(t){var i,n,o,a={results:[],more:!1},r=t.term;o=function(e,i){var s;e.is("option")?t.matcher(r,e.text(),e)&&i.push(c.optionToData(e)):e.is("optgroup")&&(s=c.optionToData(e),e.children().each2(function(t,e){o(e,s.children)}),s.children.length>0&&i.push(s))},i=s.children(),this.getPlaceholder()!==e&&i.length>0&&(n=this.getPlaceholderOption(),n&&(i=i.not(n))),i.each2(function(t,e){o(e,a.results)}),t.callback(a)}),i.id=function(t){return t.id}):"query"in i||("ajax"in i?(l=i.element.data("ajax-url"),l&&l.length>0&&(i.ajax.url=l),i.query=S.call(i.element,i.ajax)):"data"in i?i.query=w(i.data):"tags"in i&&(i.query=y(i.tags),i.createSearchChoice===e&&(i.createSearchChoice=function(e){return{id:t.trim(e),text:t.trim(e)}}),i.initSelection===e&&(i.initSelection=function(e,s){var n=[];t(r(e.val(),i.separator)).each(function(){var e={id:this,text:this},s=i.tags;t.isFunction(s)&&(s=s()),t(s).each(function(){if(a(this.id,e.id))return e=this,!1}),n.push(e)}),s(n)}))),"function"!=typeof i.query)throw"query function not defined for Select2 "+i.element.attr("id");if("top"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(t,e){
t.unshift(e)};else if("bottom"===i.createSearchChoicePosition)i.createSearchChoicePosition=function(t,e){t.push(e)};else if("function"!=typeof i.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return i},monitorSource:function(){var i,s=this.opts.element,n=this;s.on("change.select2",this.bind(function(t){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var t=s.prop("disabled");t===e&&(t=!1),this.enable(!t);var i=s.prop("readonly");i===e&&(i=!1),this.readonly(i),b(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(T(this.opts.containerCssClass,this.opts.element)),b(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(T(this.opts.dropdownCssClass,this.opts.element))}),s.length&&s[0].attachEvent&&s.each(function(){this.attachEvent("onpropertychange",n._sync)}),i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,i!==e&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new i(function(e){t.each(e,n._sync)}),this.propertyObserver.observe(s.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(e){var i=t.Event("select2-selecting",{val:this.id(e),object:e,choice:e});return this.opts.element.trigger(i),!i.isDefaultPrevented()},triggerChange:function(e){e=e||{},e=t.extend({},e,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(e),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var t=this._enabled&&!this._readonly,e=!t;return t!==this.enabledInterface&&(this.container.toggleClass("select2-container-disabled",e),this.close(),this.enabledInterface=t,!0)},enable:function(t){t===e&&(t=!0),this._enabled!==t&&(this._enabled=t,this.opts.element.prop("disabled",!t),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(t){t===e&&(t=!1),this._readonly!==t&&(this._readonly=t,this.opts.element.prop("readonly",t),this.enableInterface())},opened:function(){return!!this.container&&this.container.hasClass("select2-dropdown-open")},positionDropdown:function(){var e,i,s,n,o,a=this.dropdown,r=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),h=a.outerHeight(!1),d=t(window),u=d.width(),p=d.height(),f=d.scrollLeft()+u,m=d.scrollTop()+p,g=r.top+l,v=r.left,b=g+h<=m,C=r.top-h>=d.scrollTop(),x=a.outerWidth(!1),S=v+x<=f,w=a.hasClass("select2-drop-above");w?(i=!0,!C&&b&&(s=!0,i=!1)):(i=!1,!b&&C&&(s=!0,i=!0)),s&&(a.hide(),r=this.container.offset(),l=this.container.outerHeight(!1),c=this.container.outerWidth(!1),h=a.outerHeight(!1),f=d.scrollLeft()+u,m=d.scrollTop()+p,g=r.top+l,v=r.left,x=a.outerWidth(!1),S=v+x<=f,a.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(o=t(".select2-results",a)[0],a.addClass("select2-drop-auto-width"),a.css("width",""),x=a.outerWidth(!1)+(o.scrollHeight===o.clientHeight?0:A.width),x>c?c=x:x=c,h=a.outerHeight(!1),S=v+x<=f):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(e=this.body.offset(),g-=e.top,v-=e.left),S||(v=r.left+this.container.outerWidth(!1)-x),n={left:v,width:c},i?(n.top=r.top-h,n.bottom="auto",this.container.addClass("select2-drop-above"),a.addClass("select2-drop-above")):(n.top=g,n.bottom="auto",this.container.removeClass("select2-drop-above"),a.removeClass("select2-drop-above")),n=t.extend(n,T(this.opts.dropdownCss,this.opts.element)),a.css(n)},shouldOpen:function(){var e;return!this.opened()&&(this._enabled!==!1&&this._readonly!==!0&&(e=t.Event("select2-opening"),this.opts.element.trigger(e),!e.isDefaultPrevented()))},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return!!this.shouldOpen()&&(this.opening(),R.on("mousemove.select2Event",function(t){N.x=t.pageX,N.y=t.pageY}),!0)},opening:function(){var e,s=this.containerEventName,n="scroll."+s,o="resize."+s,a="orientationchange."+s;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),e=t("#select2-drop-mask"),0==e.length&&(e=t(document.createElement("div")),e.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),e.hide(),e.appendTo(this.body),e.on("mousedown touchstart click",function(s){i(e);var n,o=t("#select2-drop");o.length>0&&(n=o.data("select2"),n.opts.selectOnBlur&&n.selectHighlighted({noFocus:!0}),n.close(),s.preventDefault(),s.stopPropagation())})),this.dropdown.prev()[0]!==e[0]&&this.dropdown.before(e),t("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),e.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var r=this;this.container.parents().add(window).each(function(){t(this).on(o+" "+n+" "+a,function(t){r.opened()&&r.positionDropdown()})})},close:function(){if(this.opened()){var e=this.containerEventName,i="scroll."+e,s="resize."+e,n="orientationchange."+e;this.container.parents().add(window).each(function(){t(this).off(i).off(s).off(n)}),this.clearDropdownAlignmentPreference(),t("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),R.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(t.Event("select2-close"))}},externalSearch:function(t){this.open(),this.search.val(t),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return T(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var e,i,s,n,o,a,r,l,c=this.results;if(i=this.highlight(),!(i<0)){if(0==i)return void c.scrollTop(0);e=this.findHighlightableChoices().find(".select2-result-label"),s=t(e[i]),l=(s.offset()||{}).top||0,n=l+s.outerHeight(!0),i===e.length-1&&(r=c.find("li.select2-more-results"),r.length>0&&(n=r.offset().top+r.outerHeight(!0))),o=c.offset().top+c.outerHeight(!0),n>o&&c.scrollTop(c.scrollTop()+(n-o)),a=l-c.offset().top,a<0&&"none"!=s.css("display")&&c.scrollTop(c.scrollTop()+a)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(e){for(var i=this.findHighlightableChoices(),s=this.highlight();s>-1&&s<i.length;){s+=e;var n=t(i[s]);if(n.hasClass("select2-result-selectable")&&!n.hasClass("select2-disabled")&&!n.hasClass("select2-selected")){this.highlight(s);break}}},highlight:function(e){var i,s,o=this.findHighlightableChoices();return 0===arguments.length?n(o.filter(".select2-highlighted")[0],o.get()):(e>=o.length&&(e=o.length-1),e<0&&(e=0),this.removeHighlight(),i=t(o[e]),i.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",i.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(i.text()),s=i.data("select2-data"),void(s&&this.opts.element.trigger({type:"select2-highlight",val:this.id(s),choice:s})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(e){var i=t(e.target).closest(".select2-result-selectable");if(i.length>0&&!i.is(".select2-highlighted")){var s=this.findHighlightableChoices();this.highlight(s.index(i))}else 0==i.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var t,e=this.results,i=e.find("li.select2-more-results"),s=this.resultsPage+1,n=this,o=this.search.val(),a=this.context;0!==i.length&&(t=i.offset().top-e.offset().top-e.height(),t<=this.opts.loadMorePadding&&(i.addClass("select2-active"),this.opts.query({element:this.opts.element,term:o,page:s,context:a,matcher:this.opts.matcher,callback:this.bind(function(t){n.opened()&&(n.opts.populateResults.call(this,e,t.results,{term:o,page:s,context:a}),n.postprocessResults(t,!1,!1),t.more===!0?(i.detach().appendTo(e).text(T(n.opts.formatLoadMore,n.opts.element,s+1)),window.setTimeout(function(){n.loadMoreIfNeeded()},10)):i.remove(),n.positionDropdown(),n.resultsPage=s,n.context=t.context,this.opts.element.trigger({type:"select2-loaded",items:t}))})})))},tokenize:function(){},updateResults:function(i){function s(){c.removeClass("select2-active"),u.positionDropdown(),h.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?u.liveRegion.text(h.text()):u.liveRegion.text(u.opts.formatMatches(h.find(".select2-result-selectable").length))}function n(t){h.html(t),s()}var o,r,l,c=this.search,h=this.results,d=this.opts,u=this,p=c.val(),f=t.data(this.container,"select2-last-term");if((i===!0||!f||!a(p,f))&&(t.data(this.container,"select2-last-term",p),i===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var m=this.getMaximumSelectionSize();if(m>=1&&(o=this.data(),t.isArray(o)&&o.length>=m&&I(d.formatSelectionTooBig,"formatSelectionTooBig")))return void n("<li class='select2-selection-limit'>"+T(d.formatSelectionTooBig,d.element,m)+"</li>");if(c.val().length<d.minimumInputLength)return n(I(d.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+T(d.formatInputTooShort,d.element,c.val(),d.minimumInputLength)+"</li>":""),void(i&&this.showSearch&&this.showSearch(!0));if(d.maximumInputLength&&c.val().length>d.maximumInputLength)return void n(I(d.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+T(d.formatInputTooLong,d.element,c.val(),d.maximumInputLength)+"</li>":"");d.formatSearching&&0===this.findHighlightableChoices().length&&n("<li class='select2-searching'>"+T(d.formatSearching,d.element)+"</li>"),c.addClass("select2-active"),this.removeHighlight(),r=this.tokenize(),r!=e&&null!=r&&c.val(r),this.resultsPage=1,d.query({element:d.element,term:c.val(),page:this.resultsPage,context:null,matcher:d.matcher,callback:this.bind(function(o){var r;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(this.context=o.context===e?null:o.context,this.opts.createSearchChoice&&""!==c.val()&&(r=this.opts.createSearchChoice.call(u,c.val(),o.results),r!==e&&null!==r&&u.id(r)!==e&&null!==u.id(r)&&0===t(o.results).filter(function(){return a(u.id(this),u.id(r))}).length&&this.opts.createSearchChoicePosition(o.results,r)),0===o.results.length&&I(d.formatNoMatches,"formatNoMatches"))return void n("<li class='select2-no-results'>"+T(d.formatNoMatches,d.element,c.val())+"</li>");h.empty(),u.opts.populateResults.call(this,h,o.results,{term:c.val(),page:this.resultsPage,context:null}),o.more===!0&&I(d.formatLoadMore,"formatLoadMore")&&(h.append("<li class='select2-more-results'>"+d.escapeMarkup(T(d.formatLoadMore,d.element,this.resultsPage))+"</li>"),window.setTimeout(function(){u.loadMoreIfNeeded()},10)),this.postprocessResults(o,i),s(),this.opts.element.trigger({type:"select2-loaded",items:o})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){this.probablyMobile||p(this.search)},selectHighlighted:function(t){if(this._touchMoved)return void this.clearTouchMoved();var e=this.highlight(),i=this.results.find(".select2-highlighted"),s=i.closest(".select2-result").data("select2-data");s?(this.highlight(e),this.onSelect(s,t)):t&&t.noFocus&&this.close()},getPlaceholder:function(){var t;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((t=this.getPlaceholderOption())!==e?t.text():e)},getPlaceholderOption:function(){if(this.select){var i=this.select.children("option").first();if(this.opts.placeholderOption!==e)return"first"===this.opts.placeholderOption&&i||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===t.trim(i.text())&&""===i.val())return i}},initContainerWidth:function(){function i(){var i,s,n,o,a,r;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(i=this.opts.element.attr("style"),i!==e)for(s=i.split(";"),o=0,a=s.length;o<a;o+=1)if(r=s[o].replace(/\s/g,""),n=r.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==n&&n.length>=1)return n[1];return"resolve"===this.opts.width?(i=this.opts.element.css("width"),i.indexOf("%")>0?i:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return t.isFunction(this.opts.width)?this.opts.width():this.opts.width}var s=i.call(this);null!==s&&this.container.css("width",s)}}),O=D(M,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container",tabindex:"0",role:"combobox"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='hidden' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return e},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var i,s,n;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.probablyMobile||(this.search.focus(),i=this.search.get(0),i.createTextRange?(s=i.createTextRange(),s.collapse(!1),s.select()):i.setSelectionRange&&(n=this.search.val().length,i.setSelectionRange(n,n)))),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.container.focus())},focus:function(){this.opened()?this.close():this.opts.shouldFocusInput(this)&&this.container.focus()},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){t("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),P.call(this,"selection","focusser")},initContainer:function(){var e,s,n=this.container,o=this.dropdown,a=k();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=e=n.find(".select2-choice"),this.focusser=n.find(".select2-focusser"),e.find(".select2-chosen").attr("id","select2-chosen-"+a),this.focusser.attr("aria-labelledby","select2-chosen-"+a),this.results.attr("id","select2-results-"+a),this.search.attr("aria-owns","select2-results-"+a),this.focusser.attr("id","s2id_autogen"+a),s=t("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(s.text()).attr("for",this.focusser.attr("id"));var r=this.opts.element.attr("title");this.opts.element.attr("title",r||s.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(t("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()){if(t.which===V.PAGE_UP||t.which===V.PAGE_DOWN)return void m(t);switch(t.which){case V.UP:case V.DOWN:return this.moveHighlight(t.which===V.UP?-1:1),void m(t);case V.ENTER:return this.selectHighlighted(),void m(t);case V.TAB:return void this.selectHighlighted({noFocus:!0});case V.ESC:return this.cancel(t),void m(t)}}})),this.search.on("blur",this.bind(function(t){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.container.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()&&t.which!==V.TAB&&!V.isControl(t)&&!V.isFunctionKey(t)&&t.which!==V.ESC){if(this.opts.openOnEnter===!1&&t.which===V.ENTER)return void m(t);if(t.which==V.DOWN||t.which==V.UP||t.which==V.ENTER&&this.opts.openOnEnter){if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return;return this.open(),void m(t)}return t.which==V.DELETE||t.which==V.BACKSPACE?(this.opts.allowClear&&this.clear(),void m(t)):void 0}})),c(this.focusser),this.container.on("keyup-change input",this.bind(function(t){if(this.opts.minimumResultsForSearch>=0){if(t.stopPropagation(),this.opened())return;this.open()}})),e.on("mousedown touchstart","abbr",this.bind(function(t){this.isInterfaceEnabled()&&(this.clear(),g(t),this.close(),this.selection.focus())})),e.on("mousedown touchstart",this.bind(function(s){m(s),i(e),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open()})),o.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&!this.probablyMobile&&this.search.focus()})),e.on("focus",this.bind(function(t){m(t)})),this.container.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(t.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(e){var i=this.selection.data("select2-data");if(i){var s=t.Event("select2-clearing");if(this.opts.element.trigger(s),s.isDefaultPrevented())return;var n=this.getPlaceholderOption();this.opts.element.val(n?n.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),e!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var t=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==e&&null!==i&&(t.updateSelection(i),t.close(),t.setPlaceholder(),t.nextSearchTerm=t.opts.nextSearchTerm(i,t.search.val()))})}},isPlaceholderOptionSelected:function(){var t;return this.getPlaceholder()!==e&&((t=this.getPlaceholderOption())!==e&&t.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===e||null===this.opts.element.val())},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var s=t.find("option").filter(function(){return this.selected&&!this.disabled});e(i.optionToData(s))}:"data"in e&&(e.initSelection=e.initSelection||function(i,s){var n=i.val(),o=null;e.query({matcher:function(t,i,s){var r=a(n,e.id(s));return r&&(o=s),r},callback:t.isFunction(s)?function(){s(o)}:t.noop})}),e},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===e?e:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var t=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&t!==e){if(this.select&&this.getPlaceholderOption()===e)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(t)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(t,e,i){var s=0,n=this;if(this.findHighlightableChoices().each2(function(t,e){if(a(n.id(e.data("select2-data")),n.opts.element.val()))return s=t,!1}),i!==!1&&(e===!0&&s>=0?this.highlight(s):this.highlight(0)),e===!0){var o=this.opts.minimumResultsForSearch;o>=0&&this.showSearch(_(t.results)>=o)}},showSearch:function(e){this.showSearchInput!==e&&(this.showSearchInput=e,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!e),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!e),t(this.dropdown,this.container).toggleClass("select2-with-searchbox",e))},onSelect:function(t,e){if(this.triggerSelect(t)){var i=this.opts.element.val(),s=this.data();this.opts.element.val(this.id(t)),this.updateSelection(t),this.opts.element.trigger({type:"select2-selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.close(),e&&e.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),a(i,this.id(t))||this.triggerChange({added:t,removed:s})}},updateSelection:function(t){var i,s,n=this.selection.find(".select2-chosen");this.selection.data("select2-data",t),n.empty(),null!==t&&(i=this.opts.formatSelection(t,n,this.opts.escapeMarkup)),i!==e&&n.append(i),s=this.opts.formatSelectionCssClass(t,n),s!==e&&n.addClass(s),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==e&&this.container.addClass("select2-allowclear")},val:function(){var t,i=!1,s=null,n=this,o=this.data();if(0===arguments.length)return this.opts.element.val();if(t=arguments[0],arguments.length>1&&(i=arguments[1]),this.select)this.select.val(t).find("option").filter(function(){return this.selected}).each2(function(t,e){return s=n.optionToData(e),!1}),this.updateSelection(s),this.setPlaceholder(),i&&this.triggerChange({added:s,removed:o});else{if(!t&&0!==t)return void this.clear(i);if(this.opts.initSelection===e)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(t),this.opts.initSelection(this.opts.element,function(t){n.opts.element.val(t?n.id(t):""),n.updateSelection(t),n.setPlaceholder(),i&&n.triggerChange({added:t,removed:o})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(t){var i,s=!1;return 0===arguments.length?(i=this.selection.data("select2-data"),i==e&&(i=null),i):(arguments.length>1&&(s=arguments[1]),void(t?(i=this.data(),this.opts.element.val(t?this.id(t):""),this.updateSelection(t),s&&this.triggerChange({added:t,removed:i})):this.clear(s)))}}),$=D(M,{createContainer:function(){var e=t(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return e},prepareOpts:function(){var e=this.parent.prepareOpts.apply(this,arguments),i=this;return"select"===e.element.get(0).tagName.toLowerCase()?e.initSelection=function(t,e){var s=[];t.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(t,e){s.push(i.optionToData(e))}),e(s)}:"data"in e&&(e.initSelection=e.initSelection||function(i,s){var n=r(i.val(),e.separator),o=[];e.query({matcher:function(i,s,r){var l=t.grep(n,function(t){return a(t,e.id(r))}).length;return l&&o.push(r),l},callback:t.isFunction(s)?function(){for(var t=[],i=0;i<n.length;i++)for(var r=n[i],l=0;l<o.length;l++){var c=o[l];if(a(r,e.id(c))){t.push(c),o.splice(l,1);break}}s(t)}:t.noop})}),e},selectChoice:function(t){var e=this.container.find(".select2-search-choice-focus");e.length&&t&&t[0]==e[0]||(e.length&&this.opts.element.trigger("choice-deselected",e),e.removeClass("select2-search-choice-focus"),t&&t.length&&(this.close(),t.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",t)))},destroy:function(){t("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),P.call(this,"searchContainer","selection")},initContainer:function(){var e,i=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=e=this.container.find(i);var s=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(e){s.container.focus(),s.search[0].focus(),s.selectChoice(t(this))}),this.search.attr("id","s2id_autogen"+k()),this.search.prev().text(t("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(t){if(this.isInterfaceEnabled()){++this.keydowns;var i=e.find(".select2-search-choice-focus"),s=i.prev(".select2-search-choice:not(.select2-locked)"),n=i.next(".select2-search-choice:not(.select2-locked)"),o=f(this.search);if(i.length&&(t.which==V.LEFT||t.which==V.RIGHT||t.which==V.BACKSPACE||t.which==V.DELETE||t.which==V.ENTER)){var a=i;return t.which==V.LEFT&&s.length?a=s:t.which==V.RIGHT?a=n.length?n:null:t.which===V.BACKSPACE?this.unselect(i.first())&&(this.search.width(10),a=s.length?s:n):t.which==V.DELETE?this.unselect(i.first())&&(this.search.width(10),a=n.length?n:null):t.which==V.ENTER&&(a=null),this.selectChoice(a),m(t),void(a&&a.length||this.open())}if((t.which===V.BACKSPACE&&1==this.keydowns||t.which==V.LEFT)&&0==o.offset&&!o.length)return this.selectChoice(e.find(".select2-search-choice:not(.select2-locked)").last()),void m(t);if(this.selectChoice(null),this.opened())switch(t.which){case V.UP:case V.DOWN:return this.moveHighlight(t.which===V.UP?-1:1),void m(t);case V.ENTER:return this.selectHighlighted(),void m(t);case V.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case V.ESC:return this.cancel(t),void m(t)}if(t.which!==V.TAB&&!V.isControl(t)&&!V.isFunctionKey(t)&&t.which!==V.BACKSPACE&&t.which!==V.ESC){if(t.which===V.ENTER){if(this.opts.openOnEnter===!1)return;if(t.altKey||t.ctrlKey||t.shiftKey||t.metaKey)return}this.open(),t.which!==V.PAGE_UP&&t.which!==V.PAGE_DOWN||m(t),t.which===V.ENTER&&m(t)}}})),this.search.on("keyup",this.bind(function(t){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(e){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),e.stopImmediatePropagation(),this.opts.element.trigger(t.Event("select2-blur"))})),this.container.on("click",i,this.bind(function(e){this.isInterfaceEnabled()&&(this.container.focus(),t(e.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.open(),this.focusSearch(),e.preventDefault()))})),this.container.on("focus",i,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(t.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var t=this;this.opts.initSelection.call(null,this.opts.element,function(i){i!==e&&null!==i&&(t.updateSelection(i),t.close(),t.clearSearch())})}},clearSearch:function(){var t=this.getPlaceholder(),i=this.getMaxSearchWidth();t!==e&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(t).addClass("select2-default"),this.search.width(i>0?i:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(t.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(e){var i=[],s=[],o=this;t(e).each(function(){n(o.id(this),i)<0&&(i.push(o.id(this)),s.push(this))}),e=s,this.selection.find(".select2-search-choice").remove(),t(e).each(function(){o.addSelectedChoice(this)}),o.postprocessResults()},tokenize:function(){var t=this.search.val();t=this.opts.tokenizer.call(this,t,this.data(),this.bind(this.onSelect),this.opts),null!=t&&t!=e&&(this.search.val(t),t.length>0&&this.open())},onSelect:function(t,i){this.triggerSelect(t)&&(this.addSelectedChoice(t),this.opts.element.trigger({type:"selected",val:this.id(t),choice:t}),this.nextSearchTerm=this.opts.nextSearchTerm(t,this.search.val()),this.clearSearch(),this.updateResults(),!this.select&&this.opts.closeOnSelect||this.postprocessResults(t,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=e&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:t}),i&&i.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(i){var s,n,o=!i.locked,a=t("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),r=t("<li class='select2-search-choice select2-locked'><div></div></li>"),l=o?a:r,c=this.id(i),h=this.getVal();
s=this.opts.formatSelection(i,l.find("div"),this.opts.escapeMarkup),s!=e&&l.find("div").replaceWith("<div>"+s+"</div>"),n=this.opts.formatSelectionCssClass(i,l.find("div")),n!=e&&l.addClass(n),o&&l.find(".select2-search-choice-close").on("mousedown",m).on("click dblclick",this.bind(function(e){this.isInterfaceEnabled()&&(this.unselect(t(e.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),m(e),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),l.data("select2-data",i),l.insertBefore(this.searchContainer),h.push(c),this.setVal(h)},unselect:function(e){var i,s,o=this.getVal();if(e=e.closest(".select2-search-choice"),0===e.length)throw"Invalid argument: "+e+". Must be .select2-search-choice";if(i=e.data("select2-data")){var a=t.Event("select2-removing");if(a.val=this.id(i),a.choice=i,this.opts.element.trigger(a),a.isDefaultPrevented())return!1;for(;(s=n(this.id(i),o))>=0;)o.splice(s,1),this.setVal(o),this.select&&this.postprocessResults();return e.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(i),choice:i}),this.triggerChange({removed:i}),!0}},postprocessResults:function(t,e,i){var s=this.getVal(),o=this.results.find(".select2-result"),a=this.results.find(".select2-result-with-children"),r=this;o.each2(function(t,e){var i=r.id(e.data("select2-data"));n(i,s)>=0&&(e.addClass("select2-selected"),e.find(".select2-result-selectable").addClass("select2-selected"))}),a.each2(function(t,e){e.is(".select2-result-selectable")||0!==e.find(".select2-result-selectable:not(.select2-selected)").length||e.addClass("select2-selected")}),this.highlight()==-1&&i!==!1&&r.highlight(0),!this.opts.createSearchChoice&&!o.filter(".select2-result:not(.select2-selected)").length>0&&(!t||t&&!t.more&&0===this.results.find(".select2-no-results").length)&&I(r.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+T(r.opts.formatNoMatches,r.opts.element,r.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-l(this.search)},resizeSearch:function(){var t,e,i,s,n,o=l(this.search);t=v(this.search)+10,e=this.search.offset().left,i=this.selection.width(),s=this.selection.offset().left,n=i-(e-s)-o,n<t&&(n=i-o),n<40&&(n=i-o),n<=0&&(n=t),this.search.width(Math.floor(n))},getVal:function(){var t;return this.select?(t=this.select.val(),null===t?[]:t):(t=this.opts.element.val(),r(t,this.opts.separator))},setVal:function(e){var i;this.select?this.select.val(e):(i=[],t(e).each(function(){n(this,i)<0&&i.push(this)}),this.opts.element.val(0===i.length?"":i.join(this.opts.separator)))},buildChangeDetails:function(t,e){for(var e=e.slice(0),t=t.slice(0),i=0;i<e.length;i++)for(var s=0;s<t.length;s++)a(this.opts.id(e[i]),this.opts.id(t[s]))&&(e.splice(i,1),i>0&&i--,t.splice(s,1),s--);return{added:e,removed:t}},val:function(i,s){var n,o=this;if(0===arguments.length)return this.getVal();if(n=this.data(),n.length||(n=[]),!i&&0!==i)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(s&&this.triggerChange({added:this.data(),removed:n}));if(this.setVal(i),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),s&&this.triggerChange(this.buildChangeDetails(n,this.data()));else{if(this.opts.initSelection===e)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(e){var i=t.map(e,o.id);o.setVal(i),o.updateSelection(e),o.clearSearch(),s&&o.triggerChange(o.buildChangeDetails(n,o.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var e=[],i=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){e.push(i.opts.id(t(this).data("select2-data")))}),this.setVal(e),this.triggerChange()},data:function(e,i){var s,n,o=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return t(this).data("select2-data")}).get():(n=this.data(),e||(e=[]),s=t.map(e,function(t){return o.opts.id(t)}),this.setVal(s),this.updateSelection(e),this.clearSearch(),i&&this.triggerChange(this.buildChangeDetails(n,this.data())),void 0)}}),t.fn.select2=function(){var i,s,o,a,r,l=Array.prototype.slice.call(arguments,0),c=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],h=["opened","isFocused","container","dropdown"],d=["val","data"],u={search:"externalSearch"};return this.each(function(){if(0===l.length||"object"==typeof l[0])i=0===l.length?{}:t.extend({},l[0]),i.element=t(this),"select"===i.element.get(0).tagName.toLowerCase()?r=i.element.prop("multiple"):(r=i.multiple||!1,"tags"in i&&(i.multiple=r=!0)),s=r?new window.Select2["class"].multi:new window.Select2["class"].single,s.init(i);else{if("string"!=typeof l[0])throw"Invalid arguments to select2 plugin: "+l;if(n(l[0],c)<0)throw"Unknown method: "+l[0];if(a=e,s=t(this).data("select2"),s===e)return;if(o=l[0],"container"===o?a=s.container:"dropdown"===o?a=s.dropdown:(u[o]&&(o=u[o]),a=s[o].apply(s,l.slice(1))),n(l[0],h)>=0||n(l[0],d)>=0&&1==l.length)return!1}}),a===e?this:a},t.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(t,e,i,s){var n=[];return C(t.text,i.term,n,s),n.join("")},formatSelection:function(t,i,s){return t?s(t.text):e},sortResults:function(t,e,i){return t},formatResultCssClass:function(t){return t.css},formatSelectionCssClass:function(t,i){return e},formatMatches:function(t){return 1===t?"One result is available, press enter to select it.":t+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatInputTooShort:function(t,e){var i=e-t.length;return"Please enter "+i+" or more character"+(1==i?"":"s")},formatInputTooLong:function(t,e){var i=t.length-e;return"Please delete "+i+" character"+(1==i?"":"s")},formatSelectionTooBig:function(t){return"You can only select "+t+" item"+(1==t?"":"s")},formatLoadMore:function(t){return"Loading more results…"},formatSearching:function(){return"Searching…"},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(t){return t==e?null:t.id},matcher:function(t,e){return s(""+e).toUpperCase().indexOf(s(""+t).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:E,escapeMarkup:x,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(t){return t},adaptDropdownCssClass:function(t){return null},nextSearchTerm:function(t,i){return e},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(t){var e="ontouchstart"in window||navigator.msMaxTouchPoints>0;return!e||!(t.opts.minimumResultsForSearch<0)}},t.fn.select2.ajaxDefaults={transport:t.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:S,local:w,tags:y},util:{debounce:d,markMatch:C,escapeMarkup:x,stripDiacritics:s},"class":{"abstract":M,single:O,multi:$}}}}(window.ixp.runtime.components.dependencies.jQuery.v1_11),function(t){var e=t.components.dependencies._,i=(t.components.dependencies.Modernizr,t.components.constants.merge({choice:{selector:".ixp-component-choice",groupSelector:".ixp-component-choice-group["+t.components.constants.components.data.componentRoot+"]",childOverrideSelector:".ixp-component-choice-override",css:{modePrefix:"ixp-component-choice-mode-",stateOn:"ixp-component-choice-on",stateOff:"ixp-component-choice-off",override:"ixp-component-choice-override",noOverride:"ixp-component-choice-no-override",dataValueIncomplete:"ixp-input-validation-data-value-incomplete"},extensibility:{events:{stateChanging:":state:changing",stateChanged:":state:changed"}}},choiceGroup:{descendantSelector:".ixp-component-choice-group["+t.components.constants.components.data.componentRoot+"]",css:{selectModePrefix:"ixp-component-choice-group-select-mode-"},selectModes:{single:"single",multiple:"multi"}},events:{choiceChanged:":choice:changed",choiceRequestStateChange:":choice:requestStateChange",choiceGroupInitialized:":choiceGroup:initialized"}}));t.components.registerExtensibility("ixp-choice",{commands:i.choice.extensibility.commands||{},events:i.choice.extensibility.events||{}});var s={choiceCssClassesToPreserve:[i.choice.css.modePrefix+"simple",i.choice.css.modePrefix+"advanced",i.choice.css.stateOn,i.choice.css.stateOff,i.choice.css.override,i.choice.css.noOverride],choiceGroupCssClassesToPreserve:[i.choiceGroup.css.selectModePrefix+i.choiceGroup.selectModes.single,i.choiceGroup.css.selectModePrefix+i.choiceGroup.selectModes.multiple],arrayToCsv:function(t){var e,i;for(e=0;e<t.length;e++)i=t[e],i.indexOf(",")===-1&&i.indexOf('"')===-1||(t[e]='"'+i.replace(/"/g,'""')+'"');return t.join(",")},csvToArray:function(t){if(!t)return[[]];for(var e,i,s,n=new RegExp('(\\,|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^"\\,\\r\\n]*))',"gi"),o=[[]];e=n.exec(t);)i=e[1],i.length&&","!=i&&o.push([]),s=e[2]?e[2].replace(new RegExp('""',"g"),'"'):e[3],o[o.length-1].push(s);return o},getChoiceScaffolding:function(t,e,i){return{style:{customClass:e.getDefaultTheme("choice")}}},getChoiceGroupScaffolding:function(t,e,i){for(var s={scaffolding:e.scaffoldContainer("Choice Group")},n=[],o=1;o<3;o++){var a=e.scaffold("ixp-choice","Choice");a.style.customClass=e.getDefaultTheme("choice"),n.push(a)}return s.scaffolding.content.scaffolding=n,{scaffolding:[s.scaffolding],style:{customClass:e.getDefaultThemes({choicegroup:"","choicegroup-layout":"ixp-component-choice-group-inline"})}}}};t.components.register("ixp-choice",{initialize:function(s){var n=this.$el.closest(i.choice.groupSelector);this.groupInstanceId=n.attr(i.components.data.componentRoot);var o=n.closest(i.inputs.formSelector);this.formInstanceId=o.attr(i.components.data.componentRoot),this.state={instanceId:this.instanceId,dataValue:this.dataValue},this._setChoiceState("on"===this.defaultState);var a=this.$el.hasClass(i.choice.css.override)||this.$el.find(i.choice.childOverrideSelector).length;this.$el.toggleClass(i.choice.css.noOverride,!a).toggleClass(i.inputs.css.required,this.required).attr(i.inputs.data.submitUrl,this.submitUrl),this.inStudio||(t.events.on(this,this.groupInstanceId+i.events.choiceGroupInitialized,this._onChoiceGroupInitialized),t.events.on(this,this.groupInstanceId+i.events.choiceRequestStateChange,this._onSetChoiceState),this.$el.on("click"+this.eventNamespace,e.bind(this._onClicked,this)),this.$el.on("keydown"+this.eventNamespace,e.bind(this._onKeyDown,this)))},getValue:function(){return this.state.on?this.dataValue:""},onRegisterDataField:function(){},_setChoiceState:function(t){this.state.on=t,this.state.value=this.getValue(),this.state.hasValue=!this._isValueEmpty(this.state.value),this.state.required=this.required,this.$el.attr(i.inputs.data.state,JSON.stringify(this.state)),this.$el.toggleClass(i.choice.css.stateOn,t).toggleClass(i.choice.css.stateOff,!t),this._setAriaRoles(),this.inStudio&&this._setInStudioValidation()},_setInStudioValidation:function(){this.$el.toggleClass(i.choice.css.dataValueIncomplete,!this.state.dataValue)},_setAriaRoles:function(){switch(this.groupSelectMode){case i.choiceGroup.selectModes.single:this.$el.attr("role","radio").attr("aria-checked",this.state.on);break;case i.choiceGroup.selectModes.multiple:this.$el.attr("role","checkbox").attr("aria-checked",this.state.on)}},_onChoiceGroupInitialized:function(t){this.groupSelectMode=t.selectMode,this._setAriaRoles()},_onSetChoiceState:function(t){if(t.skipInstanceId!==this.instanceId){var e=!1;t.values&&t.values.length&&(e=this.$.inArray(this.dataValue,t.values)!==-1),this._setChoiceState(e)}},_onClicked:function(t){if(this.formInstanceId){var e=!1;if(this.sendCommand(i.extensibility.inputs.commands.status,this.formInstanceId,{done:function(t){e=t&&t.data.submitting}}),e)return}this._onStateChanged(t,!this.state.on)},_onKeyDown:function(t){if(32===t.which){var e=this.state.on;this._onStateChanged(t,!e),e!==this.state.on&&(t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault())}},_onStateChanged:function(t,e){if(this.groupSelectMode===i.choiceGroup.selectModes.single){if(this.$el.hasClass(i.inputs.css.validationPrefix+i.inputs.states.pending))return t.stopPropagation(),t.stopImmediatePropagation(),void t.preventDefault();if(this.state.on)return}var s={selected:e,dataValue:this.state.dataValue,required:this.state.required,cancel:!1};this.triggerExtensibility(i.choice.extensibility.events.stateChanging,s),s.cancel||(this._setChoiceState(e),this._triggerChoiceChanged(),s={selected:this.state.on,dataValue:this.state.dataValue,required:this.state.required},this.triggerExtensibility(i.choice.extensibility.events.stateChanged,s))},_triggerChoiceChanged:function(){var e={element:this.$el[0],instanceId:this.instanceId,value:this.state.value,hasValue:this.state.hasValue,required:this.state.required,submitUrl:this.submitUrl};t.events.trigger(this.groupInstanceId+i.events.choiceChanged,e)},_isValueEmpty:function(t){return null==t||""===t},studioInitialize:function(t){this.$el.attr("tabindex",-1),this._studioSetMode()},_studioSetMode:function(){var t=this.$el.find(".ixp-component-choice-simple-container").first(),e=this.$el.find(".ixp-component-choice-on-container:first, .ixp-component-choice-off-container:first");"simple"===this.mode?(t.removeAttr(i.components.studio.data.hidden),e.attr(i.components.studio.data.hidden,!0)):"advanced"===this.mode&&(t.attr(i.components.studio.data.hidden,!0),e.removeAttr(i.components.studio.data.hidden))},getParamMapOverrides:function(){return{required:function(t){this.required=t===!0||"true"===t,this.$el.toggleClass(i.inputs.css.required,this.required)},mode:function(t){this.$el.removeClass(i.choice.css.modePrefix+this.mode),this.mode=t,this.$el.addClass(i.choice.css.modePrefix+this.mode),this._studioSetMode(),this.studioApp.componentsManager.trigger(i.components.studio.events.reflow,{instanceId:this.instanceId})},submitUrl:function(t){this.submitUrl=t,this.$el.attr(i.inputs.data.submitUrl,this.submitUrl)},defaultState:function(t){this.defaultState=t,this._setChoiceState("on"===this.defaultState)},dataValue:function(t){t||(t=null),this.state.dataValue=t,this.$el.attr(i.inputs.data.state,JSON.stringify(this.state)),this._setInStudioValidation()}}},onListenToStudioEvents:function(t){t.on("element:microtheme:applied",e.bind(this._onMicroThemeApplied,this)),t.on("element:microtheme:removed",e.bind(this._onMicroThemeRemoved,this))},_hasOverride:function(){return this.$el.hasClass(i.choice.css.override)||this.$el.find(i.choice.childOverrideSelector).length},_onMicroThemeApplied:function(t){if(this.instanceId===t.model.get("elementId")){var e=this._hasOverride();this.$el.toggleClass(i.choice.css.noOverride,!e)}this._setInStudioValidation()},_onMicroThemeRemoved:function(t){if(this.instanceId===t.model.get("elementId")){var e=this._hasOverride();e&&(this.$el.removeClass(i.choice.css.override),this.$el.addClass(i.choice.css.noOverride))}this._setInStudioValidation()},allowedDropTargets:function(){return["ixp-choice-group"]},disallowedChildrenTypes:function(){return["ixp-choice","ixp-form"]},onGetCssClassesToPreserve:function(){return s.choiceCssClassesToPreserve},onGetScaffolding:function(t,e,i){return s.getChoiceScaffolding(t,e,i)}}),t.components.register("ixp-choice-group",t.components.InputComponentBase,{initialize:function(e){this._setSelectionState(),this._setInitialValue();var s={selectMode:this.multiselect?i.choiceGroup.selectModes.multiple:i.choiceGroup.selectModes.single};t.events.trigger(this.instanceId+i.events.choiceGroupInitialized,s),t.events.on(this,this.state.instanceId+i.inputs.events.formFieldInputRegistered,this._onFormFieldInputRegistered)},onListenToInputEvents:function(){t.events.on(this,this.instanceId+i.events.choiceChanged,this._onChoiceChanged),this.multiselect||this.$el.on("keydown"+this.eventNamespace,e.bind(this._onKeyDown,this))},getValue:function(){return this._computeValues()},onSetValue:function(t){this._setChoices(this._getValues(t))},_getValues:function(t){return s.csvToArray(t)[0]},setFocus:function(){var t=this.$el.closest(i.inputs.formFieldSelector);t.length?(t.attr("tabindex",0),t.focus(),t.removeAttr("tabindex")):(this.$el.attr("tabindex",0),this.$el.focus(),this.$el.removeAttr("tabindex")),this._getChoices().first().focus()},isIncomplete:function(t){return this.state.required&&(this.isValueEmpty(t)||this.missingRequiredChoices)},onValidate:function(e,i){var s=t.components.InputComponentBase.prototype.onValidate.apply(this,arguments);if(s&&this.required&&!this.multiselect){var n=this._getValues(e);if(n.length>1)return!1}return s},_setInitialValue:function(){if(!this.inStudio){var t,e=!1;if("datafield"===this.defaultValueType&&(this.dataContext.hasValue?(t=this.dataContext.value,e=!0):this.dataContext.hasDefaultValue&&(t=this.dataContext.defaultValue,e=!0)),void 0!==t||this.multiselect||(t=this.getValue()),void 0!==t){var i=this._getValues(t);this.multiselect||i.length>1&&(i=i.slice(0,1),e=!0),e&&this._setChoices(i)}this.$el.attr("role","group")}this.validate()},_getChoices:function(){return this.filterChildren(i.choice.selector,i.choiceGroup.descendantSelector)},_computeValues:function(){var t=this,e=!1,n=!1,o=[],a=this._getChoices();a.each(function(){var s=t.$(this),a=s.attr(i.inputs.data.state);if(a){a=JSON.parse(a);var r=a.value;n=n||a.required,a.hasValue?o.push(r):a.required&&(e=!0)}});var r=s.arrayToCsv(o);return this.state.required=this.required||n,this.missingRequiredChoices=e,r},_onChoiceChanged:function(t){this.multiselect||(this._setChoices(t.values||[],t.instanceId),this._getChoices().addClass(i.inputs.css.validationPrefix+i.inputs.states.pending)),this.onInputChanged()},_onKeyDown:function(t){var e;if(37===t.which||100===t.which||38===t.which||104===t.which?e="prev":39!==t.which&&102!==t.which&&40!==t.which&&98!==t.which||(e="next"),e){var s=this._getChoices().filter("."+i.choice.css.stateOn);if(s.length&&(s=s[e](i.choice.selector),s.length)){var n=s.attr(i.inputs.data.state);n&&(n=JSON.parse(n),n.dataValue&&(t.stopPropagation(),t.stopImmediatePropagation(),t.preventDefault(),s.focus(),this._onChoiceChanged({values:[n.dataValue]})))}}},triggerInputChanged:function(){this.multiselect||this._getChoices().removeClass(i.inputs.css.validationPrefix+i.inputs.states.pending),t.components.InputComponentBase.prototype.triggerInputChanged.apply(this,arguments),this.$el.addClass("ie8").removeClass("ie8")},_setChoices:function(e,s){var n={skipInstanceId:s,values:e||[]};t.events.trigger(this.instanceId+i.events.choiceRequestStateChange,n)},_setSelectionState:function(){this.$el.toggleClass(i.choiceGroup.css.selectModePrefix+i.choiceGroup.selectModes.single,!this.multiselect).toggleClass(i.choiceGroup.css.selectModePrefix+i.choiceGroup.selectModes.multiple,this.multiselect)},_onFormFieldInputRegistered:function(t){var e=this.$(t.labelContainerSelector).get(0);this.setAriaLabelAttribute(e)},setAriaLabelAttribute:function(t){t&&t.id&&this.$el.attr("aria-labelledby",t.id)},getParamMapOverrides:function(){return{multiselect:function(t){this.multiselect=t===!0||"true"===t,this._setSelectionState()},dataField:function(t){this.dataField=t?t:null}}},allowedDropTargets:function(t){return"element"===t?["ixp-form-field"]:["ixp-form","ixp-form-field"]},onGetCssClassesToPreserve:function(){return s.choiceGroupCssClassesToPreserve},onGetScaffolding:function(t,e,i){return s.getChoiceGroupScaffolding(t,e,i)}})}(window.ixp.runtime),function(t){var e=(t.components.dependencies._,t.components.constants.merge({hiddenLabelPrefix:"Hidden Input"})),i={hiddenTmpl:'<div class="ixp-component-textbox ixp-component-textbox-inherit" >             <div class="ixp-component-hidden-input-overlay">                <span class="ixp-component-hidden-input-label"></span>            </div>            <div class="ixp-component-textbox-input-wrap">                 <input data-ixp-textbox-type="text" type="text" class="ixp-component-textbox-input" maxlength="60" tabindex="-1">             </div>         </div>'};t.components.register("ixp-hidden-input",t.components.InputComponentBase,{initialize:function(i){this.inStudio&&(this._updatePlaceholder(),this.setInStudioDataFieldValidation()),this._setInitialValue(this.defaultValue),this.inStudio?t.events.on(this,this.instanceId+e.inputs.events.inputStateChanged,this._onInputStateChanged):(this.$el.hide(),t.events.on(this,this.formInstanceId+e.inputs.events.formSubmitting,this._onFormSubmitting))},onRegisterDataField:function(){var t={},e=this.inputAttrName||this.dataContext.name;return e&&(t.name=e),this.inputAttrId&&(t.id=this.inputAttrId),void 0===this._initValue&&(t.value=this._initValue),t},_updatePlaceholder:function(){this.$placeholder||(this.$placeholder=this.$(i.hiddenTmpl),this.$el.append(this.$placeholder));var t=this.$placeholder.find(".ixp-component-hidden-input-label"),s=e.hiddenLabelPrefix;this.dataContext.name&&(s+=": "+this.dataContext.name),t.html(s),t.attr("title",s);var n=this.$el.attr("class").split(" ");if(n.length){for(var o=["ixp-component-textbox","ixp-component-textbox-inherit"];n.length;){var a=n.shift();switch(a){case"ixp-component-hidden-input":case"ixp-input":case"ixp-input-validate":case"ixp-input-required":case"ui-draggable":case"pe-element-drag":continue;default:o.push(a)}}this.$placeholder.attr("class",o.join(" "))}},_onFormSubmitting:function(){this.setValue(this.getValue(),{trigger:!1,submitting:!0})},_onInputStateChanged:function(){this._updatePlaceholder()},getValue:function(){return this.$shadowInput?this.$shadowInput.val():this._initValue},onSetValue:function(t){this.$shadowInput?this.$shadowInput.val(t):this._initValue=t},_setInitialValue:function(t){var e;switch(this.defaultValueType){case"none":e="";break;case"datafield":this.inStudio||(this.dataContext.hasValue?t=this.dataContext.value:this.dataContext.hasDefaultValue&&(t=this.dataContext.defaultValue)),e=t;break;case"custom":e=t}this.setValue(e),this.validate(e)},onStudioStateChanged:function(){var t=this.studioApp.state,e="hidden"===t.pagePlaceholders;this.$el.toggle(!e)},allowedDropTargets:function(t){return["ixp-form","ixp-form-field"]}})}(window.ixp.runtime);
//# sourceMappingURL=ixp-form.bundle.min.js.map
